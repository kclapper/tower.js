(()=>{"use strict";function t(t){return Number.isInteger(t)||"bigint"==typeof t}class e{}class n extends e{constructor(t){super(),this.num=t}isFinite(){return Number.isFinite(this.num)}isInexact(){return!0}isExact(){return!1}isInteger(){return Number.isInteger(this.num)}toInexact(){return this}toExact(){let t=this.num.toString().match(/^(.*)\.(.*)$/);if(t){parseInt(t[1]),parseInt(t[2]);let e=Math.pow(10,t[2].length);return i.makeInstance(Math.round(this.num*e),e)}return i.makeInstance(this.num,1)}toFixnum(){return Math.floor(this.num)}toString(){return this.num.toString()}toSignedString(){return this.num>=0?"+"+this.num.toString():this.num.toString()}greaterThan(t){return t instanceof i?this.toExact().greaterThan(t):this.num>t.num}greaterThanOrEqual(t){return t instanceof i?this.toExact().greaterThanOrEqual(t):this.num>=t.num}lessThan(t){return t instanceof i?this.toExact().lessThan(t):this.num<t.num}lessThanOrEqual(t){return t instanceof i?this.toExact().lessThanOrEqual(t):this.num<=t.num}equals(t){return t instanceof i?this.toExact().equals(t):this.num===t.num}isZero(){return 0===this.num}isPositive(){return this.num>0}isNegative(){return this.num<0}add(t){return t instanceof i?this.add(t.toInexact()):new n(this.num+t.num)}subtract(t){return t instanceof i?this.subtract(t.toInexact()):new n(this.num-t.num)}multiply(t){return t instanceof i?this.multiply(t.toInexact()):new n(this.num*t.num)}divide(t){return t instanceof i?this.divide(t.toInexact()):new n(this.num/t.num)}numerator(){return this.toExact().numerator()}denominator(){return this.toExact().denominator()}integerSqrt(){return new n(Math.floor(Math.sqrt(this.num)))}sqrt(){return new n(Math.sqrt(this.num))}abs(){return new n(Math.abs(this.num))}floor(){return new n(Math.floor(this.num))}ceiling(){return new n(Math.ceil(this.num))}round(){return new n(Math.round(this.num))}log(){return new n(Math.log(this.num))}expt(t){return t instanceof i?this.expt(t.toInexact()):new n(Math.pow(this.num,t.num))}exp(){return new n(Math.exp(this.num))}angle(){return 0===this.num||this.num>0?h:new n(Math.PI)}atan(){return new n(Math.atan(this.num))}cos(){return new n(Math.cos(this.num))}sin(){return new n(Math.sin(this.num))}acos(){return new n(Math.acos(this.num))}asin(){return new n(Math.asin(this.num))}}class i extends e{static makeInstance(t,e){if("bigint"==typeof t&&"bigint"==typeof e)return new u(t,e);if("number"==typeof t&&"number"==typeof e)return new a(t,e);throw new TypeError(`Numberator and denominator types must match, given ${typeof t} and ${typeof e}`)}}function r(t){return t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER}function s(t){let e=BigInt(Number.MAX_SAFE_INTEGER),n=BigInt(Number.MIN_SAFE_INTEGER);return t<e&&t>n}class a extends i{constructor(t,e=1){if(super(),!Number.isInteger(t)&&!Number.isInteger(e))throw new TypeError("Exact number can only be constructed from integers.");if("number"!=typeof t||"number"!=typeof e)throw new TypeError("Exact value numerator and denominator types must match");{e<0&&(t*=-1,e*=-1);let n=this.gcd(t,e);this.num=t/n,this.den=e/n}}gcd(t,e){let n;for(;0!==e;)n=t,t=e,e=n%e;return t}isFinite(){return!0}isInexact(){return!1}isExact(){return!0}isInteger(){return 1===this.den}toInexact(){let t=this.num/this.den;return new n(t)}toExact(){return this}toBigExact(){return new u(BigInt(this.num),BigInt(this.den))}toFixnum(){return Math.floor(this.num/this.den)}toString(){let t=Math.abs(this.num).toString(),e=Math.abs(this.den).toString();return this.isPositive()||this.isZero()?`${t}/${e}`:`-${t}/${e}`}toSignedString(){return this.isPositive()||this.isZero()?"+"+this.toString():this.toString()}greaterThan(t){return t instanceof n?this.toInexact().greaterThan(t):t instanceof u?this.toBigExact().greaterThan(t):this.num*t.den>this.den*t.den}greaterThanOrEqual(t){return t instanceof n?this.toInexact().greaterThanOrEqual(t):t instanceof u?this.toBigExact().greaterThanOrEqual(t):this.num*t.den>=this.den*t.den}lessThan(t){return t instanceof n?this.toInexact().lessThan(t):t instanceof u?this.toBigExact().lessThan(t):this.num*t.den<this.den*t.den}lessThanOrEqual(t){return t instanceof n?this.toInexact().lessThanOrEqual(t):t instanceof u?this.toBigExact().lessThanOrEqual(t):this.num*t.den<=this.den*t.den}equals(t){return t instanceof n?this.toInexact().equals(t):t instanceof u?this.toBigExact().equals(t):this.num*t.den==this.den*t.den}isZero(){return 0===this.num}isPositive(){return this.num>0}isNegative(){return this.num<0}add(t){if(t instanceof n)return this.toInexact().add(t);if(t instanceof u)return this.toBigExact().add(t);if(t instanceof a){let e=this.num*t.den+t.num*this.den,n=this.den*t.den;return r(e)||r(n)?this.toBigExact().add(t.toBigExact()):new a(e,n)}throw new Error(`Cannot add ${this} to value ${t}`)}subtract(t){if(t instanceof n)return this.toInexact().subtract(t);if(t instanceof u)return this.toBigExact().subtract(t);if(t instanceof a){let e=this.num*t.den-t.num*this.den,n=this.den*t.den;return r(e)||r(n)?this.toBigExact().subtract(t.toBigExact()):new a(e,n)}throw new Error(`Cannot subtract ${this} and ${t}`)}multiply(t){if(t instanceof n)return this.toInexact().multiply(t);if(t instanceof u)return this.toBigExact().multiply(t);if(t instanceof a){let e=this.num*t.num,n=this.den*t.den;return r(e)||r(n)?this.toBigExact().multiply(t.toBigExact()):new a(e,n)}throw new Error(`Cannot multiply ${this} and ${t}`)}divide(t){if(t instanceof n)return this.toInexact().multiply(t);if(t instanceof u)return this.toBigExact().multiply(t);if(t.isZero())throw new Error("/: division by zero"+this+t);if(t instanceof a){let e=this.num*t.den,n=this.den*t.num;return r(e)||r(n)?this.toBigExact().divide(t.toBigExact()):new a(e,n)}throw new Error(`Cannot divide ${this} and ${t}`)}numerator(){return new a(this.num)}denominator(){return new a(this.den)}integerSqrt(){return this.sqrt().floor()}sqrt(){if(this.isNegative())throw new Error("Cannot take square root of negative number "+this);let t=Math.sqrt(this.num),e=Math.sqrt(this.den);return t===Math.floor(t)&&e===Math.floor(e)?new a(t,e):new n(t/e)}abs(){return this.isNegative()?new a(-1*this.num,this.den):this}floor(){return 1===this.den?this:new a(Math.floor(this.num/this.den))}ceiling(){return 1===this.den?this:new a(Math.ceil(this.num/this.den))}round(){return 1===this.den?this:new a(Math.round(this.num/this.den))}log(){return new n(Math.log(this.num/this.den))}expt(t){if((t=t.toInexact()).isInteger()){let e=t.num,n=Math.pow(this.num,e),i=Math.pow(this.den,e);return r(n)||r(i)?this.toBigExact().expt(t):new a(n,i)}return this.toInexact().expt(t)}exp(){return new n(Math.exp(this.num/this.den))}angle(){return this.isNegative()?new n(Math.PI):new a(0)}atan(){return new n(Math.atan(this.num/this.den))}cos(){return new n(Math.cos(this.num/this.den))}sin(){return new n(Math.sin(this.num/this.den))}acos(){return new n(Math.acos(this.num/this.den))}asin(){return new n(Math.asin(this.num/this.den))}}class u extends i{constructor(t,e=1n){if(super(),"bigint"!=typeof t||"bigint"!=typeof e)throw new TypeError("Exact value numerator and denominator types must match");{e<0&&(t*=-1n,e*=-1n);let n=this.gcd(t,e);this.num=t/n,this.den=e/n}}gcd(t,e){let n;for(;0n!==e;)n=t,t=e,e=n%e;return t}bigintAbs(t){return t<0n?-1n*t:t}isFinite(){return!0}isInexact(){return!1}isExact(){return!0}isInteger(){return 1n===this.den}toInexact(){let t=Number(this.num)/Number(this.den);return new n(t)}toExact(){return this}toSmallExact(){return new a(Number(this.num),Number(this.den))}toFixnum(){return this.toInexact().toFixnum()}toString(){return`${this.bigintAbs(this.num).toString().slice(0,-1)}/${this.bigintAbs(this.den).toString().slice(0,-1)}`}toSignedString(){return this.isNegative()?this.toString():"+"+this.toString()}greaterThan(t){if(t instanceof n)return this.toInexact().greaterThan(t);if(t instanceof a)return this.greaterThan(t.toBigExact());if(t instanceof u)return this.num*t.den>this.den*t.den;throw new Error(`Cannot compare ${this} and ${t}`)}greaterThanOrEqual(t){if(t instanceof n)return this.toInexact().greaterThanOrEqual(t);if(t instanceof a)return this.greaterThanOrEqual(t.toBigExact());if(t instanceof u)return this.num*t.den>=this.den*t.den;throw new Error(`Cannot compare ${this} and ${t}`)}lessThan(t){if(t instanceof n)return this.toInexact().lessThan(t);if(t instanceof a)return this.lessThan(t.toBigExact());if(t instanceof u)return this.num*t.den<this.den*t.den;throw new Error(`Cannot compare ${this} and ${t}`)}lessThanOrEqual(t){if(t instanceof n)return this.toInexact().lessThanOrEqual(t);if(t instanceof a)return this.lessThanOrEqual(t.toBigExact());if(t instanceof u)return this.num*t.den<=this.den*t.den;throw new Error(`Cannot compare ${this} and ${t}`)}equals(t){if(t instanceof n)return this.toInexact().equals(t);if(t instanceof a)return this.equals(t.toBigExact());if(t instanceof u)return this.num*t.den==this.den*t.den;throw new Error(`Cannot compare ${this} and ${t}`)}isZero(){return 0n===this.num}isPositive(){return this.num>0n}isNegative(){return this.num<0n}add(t){if(t instanceof n)return this.toInexact().add(t);if(t instanceof a)return this.add(t.toBigExact());if(t instanceof u){let e=this.num*t.den+t.num*this.den,n=this.den*t.den;return s(e)&&s(n)?this.toSmallExact().add(t.toSmallExact()):new u(e,n)}throw new Error(`Cannot add ${this} and ${t}`)}subtract(t){if(t instanceof n)return this.toInexact().add(t);if(t instanceof a)return this.add(t.toBigExact());if(t instanceof u){let e=this.num*t.den-t.num*this.den,n=this.den*t.den;return s(e)&&s(n)?this.toSmallExact().subtract(t.toSmallExact()):new u(e,n)}throw new Error(`Cannot subtract ${this} and ${t}`)}multiply(t){if(t instanceof n)return this.toInexact().add(t);if(t instanceof a)return this.add(t.toBigExact());if(t instanceof u){let e=this.num*t.num,n=this.den*t.den;return s(e)&&s(n)?this.toSmallExact().multiply(t.toSmallExact()):new u(e,n)}throw new Error(`Cannot multiply ${this} and ${t}`)}divide(t){if(t instanceof n)return this.toInexact().add(t);if(t instanceof a)return this.add(t.toBigExact());if(t instanceof u){let e=this.num*t.den,n=this.den*t.num;return s(e)&&s(n)?this.toSmallExact().divide(t.toSmallExact()):new u(e,n)}throw new Error(`Cannot divide ${this} and ${t}`)}numerator(){return new u(this.num)}denominator(){return new u(this.den)}integerSqrt(){return this.sqrt().floor()}sqrt(){return this.toSmallExact().sqrt()}abs(){return this.isNegative()?new u(-1n*this.num,this.den):this}floor(){return 1n===this.den?this:new u(this.num/this.den)}ceiling(){return 1n===this.den?this:new u(this.num/this.den+1n)}round(){if(1n===this.den)return this;{let t=this.floor(),e=this.subtract(t),n=this.ceiling();return n.subtract(this).greaterThan(e)?n:t}}log(){return this.toSmallExact().log()}expt(t){if((t=t.toInexact()).isInteger()){let e=t.num,n=this;for(let t=1;t<e;t++)n=n.multiply(this);return n}return this.toSmallExact().expt(t)}exp(){return this.toSmallExact().exp()}angle(){return new u(0n)}atan(){return this.toSmallExact().atan()}cos(){return this.toSmallExact().cos()}sin(){return this.toSmallExact().sin()}acos(){return this.toSmallExact().acos()}asin(){return this.toSmallExact().asin()}}const h=new a(0),o=new a(0),l=new a(1),m=new a(2),d=new a(-1),c=new n(Math.PI),f=new n(Number.POSITIVE_INFINITY),w=new n(Number.NEGATIVE_INFINITY),g=new n(Number.NaN);var E;!function(t){t[t.INTEGER=0]="INTEGER",t[t.RATIONAL=1]="RATIONAL",t[t.REAL=2]="REAL",t[t.COMPLEX=3]="COMPLEX"}(E||(E={}));class x{constructor(t,e){let n;this.real=t,this.imag=void 0===e?o:e,n=this.isInteger()?E.INTEGER:this.isRational()?E.RATIONAL:this.isReal()?E.REAL:E.COMPLEX,this.level=n}static makeInstance(e,i,r,s){if(void 0===r&&void 0!==s)throw new Error("Must specify both a numerator and denominator.");r="number"==typeof e?0:0n;let h,o,l=void 0!==i&&void 0!==s;if(!l&&(void 0!==i||void 0!==s))throw new Error("Real and imaginary part must be the same exactness.");if(h=l?t(e)&&t(r)&&t(i)&&t(s):t(e)&&t(r),o=l?typeof e==typeof r&&typeof i==typeof s&&typeof e==typeof i:typeof e==typeof r,!o)throw new TypeError("All makeInstance arguments must be the same type.");let m,d,c="bigint"==typeof e;if(l)if(h&&c)m=new u(e,i),d=new u(r,s);else{if(!h)throw new TypeError("Numerator and denominator must be integers.");m=new a(e,i),d=new a(r,s)}else h&&c?(m=new u(e),d=new u(r)):h?(m=new a(e),d=new a(r)):(m=new n(e),d=new n(r));return new x(m,d)}toString(){return this.isReal()?this.real.toString():this.real.toString()+this.imag.toSignedString()+"i"}liftTo(t){return this}isInteger(){return this.real.isInteger()&&this.imag.isInteger()}isRational(){return this.isFinite()}isFinite(){return this.real.isFinite()&&this.imag.isFinite()}isReal(){return this.imag.isZero()&&this.imag.isExact()}isComplex(){return!0}isExact(){return this.real.isExact()&&this.imag.isExact()}isInexact(){return!this.isExact()}isPositive(){if(!this.isReal())throw new TypeError("Not defined for complex numbers.");return this.real.isPositive()}toExact(){return new x(this.real.toExact(),this.imag.toExact())}toFixnum(){if(!this.isReal())throw new TypeError("Not defined for complex numbers.");return this.real.toFixnum()}greaterThan(t){if(!this.isReal()||!t.isReal())throw new Error("Greater than not defined for complex numbers.");return this.real.greaterThan(t.real)}greaterThanOrEqual(t){if(!this.isReal()||!t.isReal())throw new Error("Greater than or equal not defined for complex numbers.");return this.real.greaterThanOrEqual(t.real)}lessThan(t){if(!this.isReal()||!t.isReal())throw new Error("Less than not defined for complex numbers.");return this.real.lessThan(t.real)}lessThanOrEqual(t){if(!this.isReal()||!t.isReal())throw new Error("Less than or equal not defined for complex numbers.");return this.real.lessThanOrEqual(t.real)}equals(t){return this.real.equals(t.real)&&this.imag.equals(t.imag)}add(t){return new x(this.real.add(t.real),this.imag.add(t.imag))}subtract(t){return new x(this.real.subtract(t.real),this.imag.subtract(t.imag))}multiply(t){let e=this.real.multiply(t.real).subtract(this.imag.multiply(t.imag)),n=this.real.multiply(t.imag).add(this.imag.multiply(t.real));return new x(e,n)}divide(t){if(t.isReal()){let e=this.real.divide(t.real),n=this.imag.divide(t.real);return new x(e,n)}let e,n,i,r,s,a,u;if(this.isInexact()||t.isInexact())return e=this.real,n=this.imag,i=t.real,r=t.imag,r.abs().lessThanOrEqual(i.abs())?(s=r.divide(i),a=e.add(n.multiply(s)).divide(i.add(r.multiply(s))),u=n.subtract(e.multiply(s)).divide(i.add(r.multiply(s)))):(s=i.divide(r),a=e.multiply(s).add(n).divide(i.multiply(s).add(r)),u=n.multiply(s).subtract(e).divide(i.multiply(s).add(r))),new x(a,u);{var h=t.conjugate(),o=this.multiply(h),l=t.multiply(h).realPart();let e=o.realPart().divide(l).real,n=o.imaginaryPart().divide(l).real;return new x(e,n)}}numerator(){if(!this.isReal())throw new Error("Numerator not defined for complex numbers.");return new x(this.real.numerator())}denominator(){if(!this.isReal())throw new Error("Denominator not defined for complex numbers.");return new x(this.real.denominator())}integerSqrt(){if(this.isInteger())return new x(this.real.integerSqrt());throw new Error("IntegerSqrt only defined for integers.")}sqrt(){if(this.isReal())return new x(this.real.sqrt());let t=this.magnitude().real.add(this.real),e=t.divide(new a(2)).sqrt(),n=this.imag.divide(t.multiply(new a(2)).sqrt());return new x(e,n)}abs(){if(!this.isReal())throw new Error("abs is not defined for complex numbers.");return new x(this.real.abs())}floor(){if(!this.isReal())throw new Error("floor is not defined for complex numbers.");return new x(this.real.floor())}ceiling(){if(!this.isReal())throw new Error("ceiling is not defined for complex numbers.");return new x(this.real.ceiling())}round(){if(!this.isReal())throw new Error("round is not defined for complex numbers.");return new x(this.real.round())}conjugate(){return new x(this.real,new a(0).subtract(this.imag))}magnitude(){let t=this.real.multiply(this.real),e=this.imag.multiply(this.imag),n=t.add(e);return new x(n.sqrt())}realPart(){return new x(this.real)}imaginaryPart(){return new x(this.imag)}log(){let t=this.magnitude(),e=this.angle();return t.log().add(e.multiply(q))}expt(t){if(this.isExact()&&this.isInteger()&&t.greaterThanOrEqual(p)){let e,n=function(t,e){let n,i,r;if("number"==typeof t&&"number"==typeof e)n=0,i=1,r=2;else{if("bigint"!=typeof t||"bigint"!=typeof e)throw new TypeError("n and k types must match.");n=0n,i=1n,r=2n}let s=i;for(;;){if(e===n)return s;e%r===n?(t*=t,e/=r):(s*=t,e-=i)}}(this.real.toFixnum(),t.real.toFixnum());return e="number"==typeof n?new a(n):new u(n),new x(e)}return t.multiply(this.log()).exp()}exp(){let t=new x(this.real.exp()),e=new x(this.imag.cos()),n=new x(this.imag.sin());return t.multiply(e.add(n.multiply(q)))}angle(){if(this.isReal())return new x(this.real.angle());if(this.real.equals(o)){let t=N.divide(y);return this.imag.greaterThan(o)?t:t.multiply(T)}let t=this.imaginaryPart().abs().divide(this.realPart().abs()).atan();return this.realPart().greaterThan(p)?this.imaginaryPart().greaterThan(p)?t:t.multiply(T):this.imaginaryPart().greaterThan(p)?N.subtract(t):t.subtract(N)}atan(){return this.equals(q)||this.equals(v)?S:q.multiply(I.multiply(q.add(this).divide(q.add(p.subtract(this))).log()))}cos(){if(this.isReal())return new x(this.real.cos());let t=this.multiply(q),e=t.multiply(T);return t.exp().add(e.exp()).divide(y)}sin(){if(this.isReal())return new x(this.real.sin());let t=this.multiply(q),e=t.multiply(T),n=new x(o,m);return t.exp().subtract(e.exp()).divide(n)}acos(){if(this.isReal())return new x(this.real.acos());let t=N.divide(y),e=this.multiply(q),n=b.subtract(this.multiply(this)).sqrt(),i=e.add(n).log().multiply(q);return t.add(i)}asin(){if(this.isReal())return new x(this.real.asin());let t=b.subtract(this.multiply(this)).sqrt();return y.multiply(this.divide(b.add(t)).atan())}}const p=new x(o),b=new x(l),y=new x(m),I=b.divide(y),T=new x(d),q=new x(o,l),v=new x(o,d),N=new x(c),S=(new x(f),new x(w)),M=(new x(g),new a(0)),R=new a(1),$=new a(2),B=new a(-1),O=new n(Math.PI),P=new n(Number.POSITIVE_INFINITY),F=new n(Number.NEGATIVE_INFINITY),A=new n(Number.NaN),C=(new x(M),new x(R)),_=new x($);C.divide(_),new x(B),new x(M,R),new x(M,B),new x(O),new x(P),new x(F),new x(A)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBTyxJQUFJLEVBQVluRCxHQUN2QixFQUFNLElBQUksRUFBWUMsR0FDdEI2RCxFQUFNLElBQUksRUFBWTVELEdBRXRCaUUsRUFBTyxFQUFJL0csT0FBTzBHLEdBRWxCQyxFQUFVLElBQUksRUFBWTVELEdBRTFCK0MsRUFBSSxJQUFJLEVBQVlsRCxFQUFVQyxHQUM5QmdFLEVBQVEsSUFBSSxFQUFZakUsRUFBVUcsR0FFbENqQyxFQUFLLElBQUksRUFBWWtDLEdBR3JCOEQsR0FETSxJQUFJLEVBQVk3RCxHQUNaLElBQUksRUFBWUUsSUN2ZDFCLEdEd2RNLElBQUksRUFBWUUsR0N4ZFgsSUFBSTlCLEVBQWlCLElBQ2hDLEVBQVUsSUFBSUEsRUFBaUIsR0FDL0IsRUFBVSxJQUFJQSxFQUFpQixHQUUvQixFQUFjLElBQUlBLEdBQWtCLEdBRXBDLEVBQVMsSUFBSTFELEVBQWNjLEtBQUttQyxJQUVoQyxFQUFVLElBQUlqRCxFQUFjSCxPQUFPd0YsbUJBQ25DLEVBQWMsSUFBSXJGLEVBQWNILE9BQU8wRixtQkFDdkMsRUFBVSxJQUFJdkYsRUFBY0gsT0FBTzRGLEtBTW5DLEdBRE8sSUFBSSxFQUFZLEdBQ2pCLElBQUksRUFBWSxJQUN0QixFQUFNLElBQUksRUFBWSxHQUVmLEVBQUl0RCxPQUFPLEdBRVIsSUFBSSxFQUFZLEdBRXRCLElBQUksRUFBWSxFQUFVLEdBQ3RCLElBQUksRUFBWSxFQUFVLEdBRTdCLElBQUksRUFBWSxHQUVmLElBQUksRUFBWSxHQUNaLElBQUksRUFBWSxHQUNwQixJQUFJLEVBQVksRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Rvd2VyLmpzLy4vc3JjL251bWJlcnMvdXRpbC50cyIsIndlYnBhY2s6Ly90b3dlci5qcy8uL3NyYy9udW1iZXJzL1ZhbHVlLnRzIiwid2VicGFjazovL3Rvd2VyLmpzLy4vc3JjL251bWJlcnMvbWFpbi50cyIsIndlYnBhY2s6Ly90b3dlci5qcy8uL3NyYy9udW1iZXJzL0JveGVkTnVtYmVyLnRzIiwid2VicGFjazovL3Rvd2VyLmpzLy4vc3JjL251bWJlcnMvY29uc3RhbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgSlNJbnRlZ2VyLFxuICAgIEpTTnVtYmVyXG59IGZyb20gJy4vbWFpbic7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0pTTnVtYmVyKG46IGFueSk6IG4gaXMgSlNOdW1iZXIge1xuICAgIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgfHwgdHlwZW9mIG4gPT09ICdiaWdpbnQnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNKU0ludGVnZXIobjogYW55KTogbiBpcyBKU0ludGVnZXIge1xuICAgIHJldHVybiBOdW1iZXIuaXNJbnRlZ2VyKG4pIHx8IHR5cGVvZiBuID09PSAnYmlnaW50Jztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludGVnZXJJc09uZShuOiBKU0ludGVnZXIpOiBib29sZWFuIHtcbiAgICBsZXQgaXNJbnRlZ2VyID0gaXNKU0ludGVnZXIobik7XG4gICAgbGV0IGlzT25lID0gdHlwZW9mIG4gPT09ICdiaWdpbnQnID8gbiA9PT0gMW4gOiBuID09PSAxO1xuICAgIHJldHVybiBpc0ludGVnZXIgJiYgaXNPbmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBudW1iZXJJc1JhdGlvbmFsKG46IEpTTnVtYmVyKTogYm9vbGVhbiB7XG4gICAgbGV0IGlzQmlnSW50ID0gdHlwZW9mIG4gPT09ICdiaWdpbnQnO1xuICAgIGxldCBpc1JhdGlvbmFsRmxvYXQgPSBOdW1iZXIuaXNGaW5pdGUobikgJiYgIU51bWJlci5pc05hTihuKTtcbiAgICByZXR1cm4gaXNCaWdJbnQgfHwgaXNSYXRpb25hbEZsb2F0O1xufVxuXG5cbi8vIFRPRE86IE1ha2UgaXQgc28gaXQgYXV0b21hdGljYWxseSBlc2NhbGF0ZXMgdG8gYmlnaW50LlxuZXhwb3J0IGZ1bmN0aW9uIGZhc3RFeHB0KG46IEpTSW50ZWdlciwgazogSlNJbnRlZ2VyKTogSlNJbnRlZ2VyIHtcbiAgICBsZXQgemVybywgb25lLCB0d287XG4gICAgaWYgKHR5cGVvZiBuID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgayA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgemVybyA9IDA7XG4gICAgICAgIG9uZSA9IDE7XG4gICAgICAgIHR3byA9IDI7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbiA9PT0gJ2JpZ2ludCcgJiYgdHlwZW9mIGsgPT09ICdiaWdpbnQnKSB7XG4gICAgICAgIHplcm8gPSAwbjtcbiAgICAgICAgb25lID0gMW47XG4gICAgICAgIHR3byA9IDJuO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJuIGFuZCBrIHR5cGVzIG11c3QgbWF0Y2guXCIpO1xuICAgIH1cblxuICAgIGxldCBhY2MgPSBvbmU7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgaWYgKGsgPT09IHplcm8pIHtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIQUNLOiBuZWVkIHRvIGNhc3QgdG8gbnVtYmVyIGV2ZW4gdGhvdWdoIG9wcyBhcmUgZGVmaW5lZCBmb3IgYm90aFxuICAgICAgICAvLyBudW1iZXIgYW5kIGJpZ2ludC5cbiAgICAgICAgaWYgKChrIGFzIG51bWJlcikgJSAodHdvIGFzIG51bWJlcikgPT09IHplcm8pIHtcbiAgICAgICAgICAgIG4gPSAobiBhcyBudW1iZXIpICogKG4gYXMgbnVtYmVyKTtcbiAgICAgICAgICAgIGsgPSAoayBhcyBudW1iZXIpIC8gKHR3byBhcyBudW1iZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWNjID0gKGFjYyBhcyBudW1iZXIpICogKG4gYXMgbnVtYmVyKTtcbiAgICAgICAgICAgIGsgPSAoayBhcyBudW1iZXIpIC0gKG9uZSBhcyBudW1iZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBKU0ludGVnZXIsXG59IGZyb20gXCIuL21haW5cIjtcblxuZXhwb3J0IHR5cGUgVmFsdWUgPSBFeGFjdE51bWJlciB8IEluZXhhY3ROdW1iZXI7XG5cbmFic3RyYWN0IGNsYXNzIEFic3RyYWN0TnVtYmVyIHtcbiAgICBhYnN0cmFjdCBpc0Zpbml0ZSgpOiBib29sZWFuO1xuICAgIGFic3RyYWN0IGlzSW5leGFjdCgpOiBib29sZWFuO1xuICAgIGFic3RyYWN0IGlzRXhhY3QoKTogYm9vbGVhbjtcbiAgICBhYnN0cmFjdCBpc0ludGVnZXIoKTogYm9vbGVhbjtcblxuICAgIGFic3RyYWN0IHRvSW5leGFjdCgpOiBJbmV4YWN0TnVtYmVyO1xuICAgIGFic3RyYWN0IHRvRXhhY3QoKTogRXhhY3ROdW1iZXI7XG4gICAgYWJzdHJhY3QgdG9GaXhudW0oKTogSlNJbnRlZ2VyO1xuXG4gICAgYWJzdHJhY3QgdG9TdHJpbmcoKTogc3RyaW5nO1xuICAgIGFic3RyYWN0IHRvU2lnbmVkU3RyaW5nKCk6IHN0cmluZztcblxuICAgIGFic3RyYWN0IGdyZWF0ZXJUaGFuKG90aGVyOiBWYWx1ZSk6IGJvb2xlYW47XG4gICAgYWJzdHJhY3QgZ3JlYXRlclRoYW5PckVxdWFsKG90aGVyOiBWYWx1ZSk6IGJvb2xlYW47XG4gICAgYWJzdHJhY3QgbGVzc1RoYW4ob3RoZXI6IFZhbHVlKTogYm9vbGVhbjtcbiAgICBhYnN0cmFjdCBsZXNzVGhhbk9yRXF1YWwob3RoZXI6IFZhbHVlKTogYm9vbGVhbjtcbiAgICBhYnN0cmFjdCBlcXVhbHMob3RoZXI6IFZhbHVlKTogYm9vbGVhbjtcblxuICAgIGFic3RyYWN0IGlzWmVybygpOiBib29sZWFuO1xuICAgIGFic3RyYWN0IGlzUG9zaXRpdmUoKTogYm9vbGVhbjtcbiAgICBhYnN0cmFjdCBpc05lZ2F0aXZlKCk6IGJvb2xlYW47XG5cbiAgICBhYnN0cmFjdCBhZGQob3RoZXI6IFZhbHVlKTogVmFsdWU7XG4gICAgYWJzdHJhY3Qgc3VidHJhY3Qob3RoZXI6IFZhbHVlKTogVmFsdWU7XG4gICAgYWJzdHJhY3QgbXVsdGlwbHkob3RoZXI6IFZhbHVlKTogVmFsdWU7XG4gICAgYWJzdHJhY3QgZGl2aWRlKG90aGVyOiBWYWx1ZSk6IFZhbHVlO1xuXG4gICAgYWJzdHJhY3QgbnVtZXJhdG9yKCk6IFZhbHVlO1xuICAgIGFic3RyYWN0IGRlbm9taW5hdG9yKCk6IFZhbHVlO1xuXG4gICAgYWJzdHJhY3QgaW50ZWdlclNxcnQoKTogVmFsdWU7XG4gICAgYWJzdHJhY3Qgc3FydCgpOiBWYWx1ZTtcbiAgICBhYnN0cmFjdCBhYnMoKTogVmFsdWU7XG4gICAgYWJzdHJhY3QgZmxvb3IoKTogVmFsdWU7XG4gICAgYWJzdHJhY3QgY2VpbGluZygpOiBWYWx1ZTtcbiAgICBhYnN0cmFjdCByb3VuZCgpOiBWYWx1ZTtcblxuICAgIGFic3RyYWN0IGxvZygpOiBWYWx1ZTtcbiAgICBhYnN0cmFjdCBleHB0KHBvd2VyOiBWYWx1ZSk6IFZhbHVlO1xuICAgIGFic3RyYWN0IGV4cCgpOiBWYWx1ZTtcblxuICAgIGFic3RyYWN0IGFuZ2xlKCk6IFZhbHVlO1xuICAgIGFic3RyYWN0IGF0YW4oKTogVmFsdWU7XG4gICAgYWJzdHJhY3QgY29zKCk6IFZhbHVlO1xuICAgIGFic3RyYWN0IHNpbigpOiBWYWx1ZTtcbiAgICBhYnN0cmFjdCBhY29zKCk6IFZhbHVlO1xuICAgIGFic3RyYWN0IGFzaW4oKTogVmFsdWU7XG59XG5cbmV4cG9ydCBjbGFzcyBJbmV4YWN0TnVtYmVyIGV4dGVuZHMgQWJzdHJhY3ROdW1iZXIge1xuICAgIHB1YmxpYyBudW06IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKG51bTogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubnVtID0gbnVtO1xuICAgIH1cblxuICAgIGlzRmluaXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHRoaXMubnVtKTtcbiAgICB9XG4gICAgaXNJbmV4YWN0KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaXNFeGFjdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpc0ludGVnZXIoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNJbnRlZ2VyKHRoaXMubnVtKTtcbiAgICB9XG5cbiAgICB0b0luZXhhY3QoKTogSW5leGFjdE51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0b0V4YWN0KCk6IEV4YWN0TnVtYmVyIHtcbiAgICAgICAgbGV0IHN0cmluZ1JlcCA9IHRoaXMubnVtLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBtYXRjaCA9IHN0cmluZ1JlcC5tYXRjaCgvXiguKilcXC4oLiopJC8pO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGxldCBpbnRQYXJ0ID0gcGFyc2VJbnQobWF0Y2hbMV0pO1xuICAgICAgICAgICAgbGV0IGZyYWNQYXJ0ID0gcGFyc2VJbnQobWF0Y2hbMl0pO1xuICAgICAgICAgICAgbGV0IHRlblRvRGVjaW1hbFBsYWNlcyA9IE1hdGgucG93KDEwLCBtYXRjaFsyXS5sZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIEV4YWN0TnVtYmVyLm1ha2VJbnN0YW5jZShcbiAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKHRoaXMubnVtICogdGVuVG9EZWNpbWFsUGxhY2VzKSxcbiAgICAgICAgICAgICAgICB0ZW5Ub0RlY2ltYWxQbGFjZXNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gRXhhY3ROdW1iZXIubWFrZUluc3RhbmNlKHRoaXMubnVtLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b0ZpeG51bSgpOiBKU0ludGVnZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLm51bSk7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHRvU2lnbmVkU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLm51bSA+PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gXCIrXCIgKyB0aGlzLm51bS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm51bS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGdyZWF0ZXJUaGFuKG90aGVyOiBWYWx1ZSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBFeGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9FeGFjdCgpLmdyZWF0ZXJUaGFuKG90aGVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5udW0gPiBvdGhlci5udW07XG4gICAgfVxuICAgIGdyZWF0ZXJUaGFuT3JFcXVhbChvdGhlcjogVmFsdWUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvRXhhY3QoKS5ncmVhdGVyVGhhbk9yRXF1YWwob3RoZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm51bSA+PSBvdGhlci5udW07XG4gICAgfVxuICAgIGxlc3NUaGFuKG90aGVyOiBWYWx1ZSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBFeGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9FeGFjdCgpLmxlc3NUaGFuKG90aGVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5udW0gPCBvdGhlci5udW07XG4gICAgfVxuICAgIGxlc3NUaGFuT3JFcXVhbChvdGhlcjogVmFsdWUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvRXhhY3QoKS5sZXNzVGhhbk9yRXF1YWwob3RoZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm51bSA8PSBvdGhlci5udW07XG4gICAgfVxuICAgIGVxdWFscyhvdGhlcjogVmFsdWUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvRXhhY3QoKS5lcXVhbHMob3RoZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm51bSA9PT0gb3RoZXIubnVtO1xuICAgIH1cblxuICAgIGlzWmVybygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtID09PSAwO1xuICAgIH1cbiAgICBpc1Bvc2l0aXZlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5udW0gPiAwO1xuICAgIH1cbiAgICBpc05lZ2F0aXZlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5udW0gPCAwO1xuICAgIH1cblxuICAgIGFkZChvdGhlcjogVmFsdWUpOiBWYWx1ZSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQob3RoZXIudG9JbmV4YWN0KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSW5leGFjdE51bWJlcih0aGlzLm51bSArIG90aGVyLm51bSk7XG4gICAgfVxuICAgIHN1YnRyYWN0KG90aGVyOiBWYWx1ZSk6IFZhbHVlIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1YnRyYWN0KG90aGVyLnRvSW5leGFjdCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIodGhpcy5udW0gLSBvdGhlci5udW0pO1xuICAgIH1cbiAgICBtdWx0aXBseShvdGhlcjogVmFsdWUpOiBWYWx1ZSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseShvdGhlci50b0luZXhhY3QoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBJbmV4YWN0TnVtYmVyKHRoaXMubnVtICogb3RoZXIubnVtKTtcbiAgICB9XG4gICAgZGl2aWRlKG90aGVyOiBWYWx1ZSk6IFZhbHVlIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpdmlkZShvdGhlci50b0luZXhhY3QoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBJbmV4YWN0TnVtYmVyKHRoaXMubnVtIC8gb3RoZXIubnVtKTtcbiAgICB9XG5cbiAgICBudW1lcmF0b3IoKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gdGhpcy50b0V4YWN0KCkubnVtZXJhdG9yKCk7XG4gICAgfVxuICAgIGRlbm9taW5hdG9yKCk6IFZhbHVlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9FeGFjdCgpLmRlbm9taW5hdG9yKCk7XG4gICAgfVxuXG4gICAgaW50ZWdlclNxcnQoKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5mbG9vcihNYXRoLnNxcnQodGhpcy5udW0pKSk7XG4gICAgfVxuICAgIHNxcnQoKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5zcXJ0KHRoaXMubnVtKSk7XG4gICAgfVxuICAgIGFicygpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5leGFjdE51bWJlcihNYXRoLmFicyh0aGlzLm51bSkpO1xuICAgIH1cbiAgICBmbG9vcigpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5leGFjdE51bWJlcihNYXRoLmZsb29yKHRoaXMubnVtKSk7XG4gICAgfVxuICAgIGNlaWxpbmcoKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5jZWlsKHRoaXMubnVtKSk7XG4gICAgfVxuICAgIHJvdW5kKCk6IFZhbHVlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmV4YWN0TnVtYmVyKE1hdGgucm91bmQodGhpcy5udW0pKTtcbiAgICB9XG5cbiAgICBsb2coKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5sb2codGhpcy5udW0pKTtcbiAgICB9XG4gICAgZXhwdChwb3dlcjogVmFsdWUpOiBWYWx1ZSB7XG4gICAgICAgIGlmIChwb3dlciBpbnN0YW5jZW9mIEV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leHB0KHBvd2VyLnRvSW5leGFjdCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5wb3codGhpcy5udW0sIHBvd2VyLm51bSkpO1xuICAgIH1cbiAgICBleHAoKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5leHAodGhpcy5udW0pKVxuICAgIH1cblxuICAgIGFuZ2xlKCk6IFZhbHVlIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMubnVtKVxuICAgICAgICAgICAgcmV0dXJuIEVYQUNUX1pFUk87XG4gICAgICAgIGlmICh0aGlzLm51bSA+IDApXG4gICAgICAgICAgICByZXR1cm4gRVhBQ1RfWkVSTztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbmV4YWN0TnVtYmVyKE1hdGguUEkpO1xuICAgIH1cbiAgICBhdGFuKCk6IFZhbHVlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmV4YWN0TnVtYmVyKE1hdGguYXRhbih0aGlzLm51bSkpO1xuICAgIH1cbiAgICBjb3MoKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5jb3ModGhpcy5udW0pKTtcbiAgICB9XG4gICAgc2luKCk6IFZhbHVlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmV4YWN0TnVtYmVyKE1hdGguc2luKHRoaXMubnVtKSk7XG4gICAgfVxuICAgIGFjb3MoKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5hY29zKHRoaXMubnVtKSk7XG4gICAgfVxuICAgIGFzaW4oKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5hc2luKHRoaXMubnVtKSk7XG4gICAgfVxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRXhhY3ROdW1iZXIgZXh0ZW5kcyBBYnN0cmFjdE51bWJlciB7XG4gICAgYWJzdHJhY3QgcmVhZG9ubHkgbnVtOiBKU0ludGVnZXI7XG4gICAgYWJzdHJhY3QgcmVhZG9ubHkgZGVuOiBKU0ludGVnZXI7XG5cbiAgICBzdGF0aWMgbWFrZUluc3RhbmNlKG51bTogbnVtYmVyLCBkZW46IG51bWJlcik6IEV4YWN0TnVtYmVyO1xuICAgIHN0YXRpYyBtYWtlSW5zdGFuY2UobnVtOiBiaWdpbnQsIGRlbjogYmlnaW50KTogRXhhY3ROdW1iZXI7XG4gICAgc3RhdGljIG1ha2VJbnN0YW5jZShudW06IEpTSW50ZWdlciwgZGVuOiBKU0ludGVnZXIpOiBFeGFjdE51bWJlciB7XG4gICAgICAgaWYgKHR5cGVvZiBudW0gPT09ICdiaWdpbnQnICYmIHR5cGVvZiBkZW4gPT09ICdiaWdpbnQnKSB7XG4gICAgICAgICAgIHJldHVybiBuZXcgQmlnRXhhY3ROdW1iZXIobnVtLCBkZW4pO1xuICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG51bSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGRlbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgcmV0dXJuIG5ldyBTbWFsbEV4YWN0TnVtYmVyKG51bSwgZGVuKTtcbiAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBOdW1iZXJhdG9yIGFuZCBkZW5vbWluYXRvciB0eXBlcyBtdXN0IG1hdGNoLCBnaXZlbiAke3R5cGVvZiBudW19IGFuZCAke3R5cGVvZiBkZW59YClcbiAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1Vuc2FmZUludGVnZXIobjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG4gPiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiB8fCBuIDwgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7XG59XG5cbmZ1bmN0aW9uIGlzU2FmZUludGVnZXIobjogYmlnaW50KTogYm9vbGVhbiB7XG4gICAgbGV0IG1heCA9IEJpZ0ludChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUik7XG4gICAgbGV0IG1pbiA9IEJpZ0ludChOdW1iZXIuTUlOX1NBRkVfSU5URUdFUik7XG4gICAgcmV0dXJuIG4gPCBtYXggJiYgbiA+IG1pbjtcbn1cblxuLy8gVE9ETzogSnVtcCB0b28gQmlnRXhhY3ROdW1iZXIgYXMgbmVjZXNzYXJ5XG5leHBvcnQgY2xhc3MgU21hbGxFeGFjdE51bWJlciBleHRlbmRzIEV4YWN0TnVtYmVyIHtcbiAgICBwdWJsaWMgcmVhZG9ubHkgbnVtOiBudW1iZXI7XG4gICAgcHVibGljIHJlYWRvbmx5IGRlbjogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IobnVtOiBudW1iZXIsIGRlbjogbnVtYmVyID0gMSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIobnVtKSAmJiAhTnVtYmVyLmlzSW50ZWdlcihkZW4pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhhY3QgbnVtYmVyIGNhbiBvbmx5IGJlIGNvbnN0cnVjdGVkIGZyb20gaW50ZWdlcnMuXCIpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIG51bSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGRlbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgdGhlIG51bWVyYXRvciBjYW4gYmUgbmVnYXRpdmUuXG4gICAgICAgICAgICBpZiAoZGVuIDwgMCkge1xuICAgICAgICAgICAgICAgIG51bSAqPSAtMTtcbiAgICAgICAgICAgICAgICBkZW4gKj0gLTE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBnY2QgPSB0aGlzLmdjZChudW0sIGRlbik7XG4gICAgICAgICAgICB0aGlzLm51bSA9IG51bSAvIGdjZDtcbiAgICAgICAgICAgIHRoaXMuZGVuID0gZGVuIC8gZ2NkO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhhY3QgdmFsdWUgbnVtZXJhdG9yIGFuZCBkZW5vbWluYXRvciB0eXBlcyBtdXN0IG1hdGNoXCIpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdjZChhOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGxldCB0O1xuICAgICAgICB3aGlsZSAoYiAhPT0gMCkge1xuICAgICAgICAgICAgdCA9IGE7XG4gICAgICAgICAgICBhID0gYjtcbiAgICAgICAgICAgIGIgPSB0ICUgYjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG5cbiAgICBpc0Zpbml0ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlzSW5leGFjdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpc0V4YWN0KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaXNJbnRlZ2VyKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kZW4gPT09IDE7XG4gICAgfVxuXG4gICAgdG9JbmV4YWN0KCk6IEluZXhhY3ROdW1iZXIge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5udW0gLyB0aGlzLmRlbjtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmV4YWN0TnVtYmVyKHJlc3VsdCk7XG4gICAgfVxuICAgIHRvRXhhY3QoKTogRXhhY3ROdW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdG9CaWdFeGFjdCgpOiBCaWdFeGFjdE51bWJlciB7XG4gICAgICAgIHJldHVybiBuZXcgQmlnRXhhY3ROdW1iZXIoQmlnSW50KHRoaXMubnVtKSwgQmlnSW50KHRoaXMuZGVuKSk7XG4gICAgfVxuICAgIHRvRml4bnVtKCk6IEpTSW50ZWdlciB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMubnVtIC8gdGhpcy5kZW4pO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBudW0gPSBNYXRoLmFicyh0aGlzLm51bSBhcyBudW1iZXIpLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBkZW4gPSBNYXRoLmFicyh0aGlzLmRlbiBhcyBudW1iZXIpLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQb3NpdGl2ZSgpIHx8IHRoaXMuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHtudW19LyR7ZGVufWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYC0ke251bX0vJHtkZW59YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NpZ25lZFN0cmluZygpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5pc1Bvc2l0aXZlKCkgfHwgdGhpcy5pc1plcm8oKSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiK1wiICsgdGhpcy50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gICAgfVxuXG5cbiAgICBncmVhdGVyVGhhbihvdGhlcjogVmFsdWUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgSW5leGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9JbmV4YWN0KCkuZ3JlYXRlclRoYW4ob3RoZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgQmlnRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQmlnRXhhY3QoKS5ncmVhdGVyVGhhbihvdGhlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgdGhpc1ZhbCA9IHRoaXMubnVtICogKG90aGVyLmRlbiBhcyBudW1iZXIpO1xuICAgICAgICAgICAgbGV0IG90aGVyVmFsID0gdGhpcy5kZW4gKiAob3RoZXIuZGVuIGFzIG51bWJlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1ZhbCA+IG90aGVyVmFsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdyZWF0ZXJUaGFuT3JFcXVhbChvdGhlcjogVmFsdWUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgSW5leGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9JbmV4YWN0KCkuZ3JlYXRlclRoYW5PckVxdWFsKG90aGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIEJpZ0V4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0JpZ0V4YWN0KCkuZ3JlYXRlclRoYW5PckVxdWFsKG90aGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0aGlzVmFsID0gdGhpcy5udW0gKiAob3RoZXIuZGVuIGFzIG51bWJlcik7XG4gICAgICAgICAgICBsZXQgb3RoZXJWYWwgPSB0aGlzLmRlbiAqIChvdGhlci5kZW4gYXMgbnVtYmVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzVmFsID49IG90aGVyVmFsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxlc3NUaGFuKG90aGVyOiBWYWx1ZSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBJbmV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0luZXhhY3QoKS5sZXNzVGhhbihvdGhlcik7XG4gICAgICAgIH0gZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBCaWdFeGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9CaWdFeGFjdCgpLmxlc3NUaGFuKG90aGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0aGlzVmFsID0gdGhpcy5udW0gKiAob3RoZXIuZGVuIGFzIG51bWJlcik7XG4gICAgICAgICAgICBsZXQgb3RoZXJWYWwgPSB0aGlzLmRlbiAqIChvdGhlci5kZW4gYXMgbnVtYmVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzVmFsIDwgb3RoZXJWYWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGVzc1RoYW5PckVxdWFsKG90aGVyOiBWYWx1ZSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBJbmV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0luZXhhY3QoKS5sZXNzVGhhbk9yRXF1YWwob3RoZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgQmlnRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQmlnRXhhY3QoKS5sZXNzVGhhbk9yRXF1YWwob3RoZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHRoaXNWYWwgPSB0aGlzLm51bSAqIChvdGhlci5kZW4gYXMgbnVtYmVyKTtcbiAgICAgICAgICAgIGxldCBvdGhlclZhbCA9IHRoaXMuZGVuICogKG90aGVyLmRlbiBhcyBudW1iZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNWYWwgPD0gb3RoZXJWYWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXF1YWxzKG90aGVyOiBWYWx1ZSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBJbmV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0luZXhhY3QoKS5lcXVhbHMob3RoZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgQmlnRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQmlnRXhhY3QoKS5lcXVhbHMob3RoZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHRoaXNWYWwgPSB0aGlzLm51bSAqIChvdGhlci5kZW4gYXMgbnVtYmVyKTtcbiAgICAgICAgICAgIGxldCBvdGhlclZhbCA9IHRoaXMuZGVuICogKG90aGVyLmRlbiBhcyBudW1iZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNWYWwgPT09IG90aGVyVmFsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXNaZXJvKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5udW0gPT09IDA7XG4gICAgfVxuICAgIGlzUG9zaXRpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bSA+IDA7XG4gICAgfVxuICAgIGlzTmVnYXRpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bSA8IDA7XG4gICAgfVxuXG4gICAgYWRkKG90aGVyOiBWYWx1ZSk6IFZhbHVlIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgSW5leGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9JbmV4YWN0KCkuYWRkKG90aGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIEJpZ0V4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0JpZ0V4YWN0KCkuYWRkKG90aGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIFNtYWxsRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIGxldCBudW0gPSAodGhpcy5udW0gKiBvdGhlci5kZW4pICsgKG90aGVyLm51bSAqIHRoaXMuZGVuKTtcbiAgICAgICAgICAgIGxldCBkZW4gPSB0aGlzLmRlbiAqIG90aGVyLmRlbjtcblxuICAgICAgICAgICAgaWYgKGlzVW5zYWZlSW50ZWdlcihudW0pIHx8IGlzVW5zYWZlSW50ZWdlcihkZW4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9CaWdFeGFjdCgpLmFkZChvdGhlci50b0JpZ0V4YWN0KCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNtYWxsRXhhY3ROdW1iZXIobnVtLCBkZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgYWRkICR7dGhpc30gdG8gdmFsdWUgJHtvdGhlcn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJ0cmFjdChvdGhlcjogVmFsdWUpOiBWYWx1ZSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEluZXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSW5leGFjdCgpLnN1YnRyYWN0KG90aGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIEJpZ0V4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0JpZ0V4YWN0KCkuc3VidHJhY3Qob3RoZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgU21hbGxFeGFjdE51bWJlcikge1xuICAgICAgICAgICAgbGV0IG51bSA9ICh0aGlzLm51bSAqIG90aGVyLmRlbikgLSAob3RoZXIubnVtICogdGhpcy5kZW4pO1xuICAgICAgICAgICAgbGV0IGRlbiA9IHRoaXMuZGVuICogb3RoZXIuZGVuO1xuXG4gICAgICAgICAgICBpZiAoaXNVbnNhZmVJbnRlZ2VyKG51bSkgfHwgaXNVbnNhZmVJbnRlZ2VyKGRlbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b0JpZ0V4YWN0KCkuc3VidHJhY3Qob3RoZXIudG9CaWdFeGFjdCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTbWFsbEV4YWN0TnVtYmVyKG51bSwgZGVuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHN1YnRyYWN0ICR7dGhpc30gYW5kICR7b3RoZXJ9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbXVsdGlwbHkob3RoZXI6IFZhbHVlKTogVmFsdWUge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBJbmV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0luZXhhY3QoKS5tdWx0aXBseShvdGhlcik7XG4gICAgICAgIH0gZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBCaWdFeGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9CaWdFeGFjdCgpLm11bHRpcGx5KG90aGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIFNtYWxsRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIGxldCBudW0gPSB0aGlzLm51bSAqIG90aGVyLm51bTtcbiAgICAgICAgICAgIGxldCBkZW4gPSB0aGlzLmRlbiAqIG90aGVyLmRlbjtcblxuICAgICAgICAgICAgaWYgKGlzVW5zYWZlSW50ZWdlcihudW0pIHx8IGlzVW5zYWZlSW50ZWdlcihkZW4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9CaWdFeGFjdCgpLm11bHRpcGx5KG90aGVyLnRvQmlnRXhhY3QoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgU21hbGxFeGFjdE51bWJlcihudW0sIGRlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBtdWx0aXBseSAke3RoaXN9IGFuZCAke290aGVyfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpdmlkZShvdGhlcjogVmFsdWUpOiBWYWx1ZSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEluZXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSW5leGFjdCgpLm11bHRpcGx5KG90aGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIEJpZ0V4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0JpZ0V4YWN0KCkubXVsdGlwbHkob3RoZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyLmlzWmVybygpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIvOiBkaXZpc2lvbiBieSB6ZXJvXCIgKyB0aGlzICsgb3RoZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgU21hbGxFeGFjdE51bWJlcikge1xuICAgICAgICAgICAgbGV0IG51bSA9IHRoaXMubnVtICogb3RoZXIuZGVuO1xuICAgICAgICAgICAgbGV0IGRlbiA9IHRoaXMuZGVuICogb3RoZXIubnVtO1xuXG4gICAgICAgICAgICBpZiAoaXNVbnNhZmVJbnRlZ2VyKG51bSkgfHwgaXNVbnNhZmVJbnRlZ2VyKGRlbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b0JpZ0V4YWN0KCkuZGl2aWRlKG90aGVyLnRvQmlnRXhhY3QoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgU21hbGxFeGFjdE51bWJlcihudW0sIGRlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBkaXZpZGUgJHt0aGlzfSBhbmQgJHtvdGhlcn1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG51bWVyYXRvcigpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiBuZXcgU21hbGxFeGFjdE51bWJlcih0aGlzLm51bSk7XG4gICAgfVxuICAgIGRlbm9taW5hdG9yKCk6IFZhbHVlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTbWFsbEV4YWN0TnVtYmVyKHRoaXMuZGVuKTtcbiAgICB9XG5cbiAgICBpbnRlZ2VyU3FydCgpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNxcnQoKS5mbG9vcigpO1xuICAgIH1cbiAgICBzcXJ0KCk6IFZhbHVlIHtcbiAgICAgICAgaWYgKHRoaXMuaXNOZWdhdGl2ZSgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgdGFrZSBzcXVhcmUgcm9vdCBvZiBuZWdhdGl2ZSBudW1iZXIgXCIgKyB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBudW0gPSBNYXRoLnNxcnQodGhpcy5udW0pO1xuICAgICAgICBsZXQgZGVuID0gTWF0aC5zcXJ0KHRoaXMuZGVuKTtcblxuICAgICAgICBpZiAobnVtID09PSBNYXRoLmZsb29yKG51bSkgJiYgZGVuID09PSBNYXRoLmZsb29yKGRlbikpIHtcbiAgICAgICAgICAgcmV0dXJuIG5ldyBTbWFsbEV4YWN0TnVtYmVyKG51bSwgZGVuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW5leGFjdE51bWJlcihudW0gLyBkZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFicygpOiBWYWx1ZSB7XG4gICAgICAgIGlmICh0aGlzLmlzTmVnYXRpdmUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTbWFsbEV4YWN0TnVtYmVyKC0xICogdGhpcy5udW0sIHRoaXMuZGVuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsb29yKCk6IFZhbHVlIHtcbiAgICAgICAgaWYgKHRoaXMuZGVuID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU21hbGxFeGFjdE51bWJlcihNYXRoLmZsb29yKHRoaXMubnVtIC8gdGhpcy5kZW4pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjZWlsaW5nKCk6IFZhbHVlIHtcbiAgICAgICAgaWYgKHRoaXMuZGVuID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU21hbGxFeGFjdE51bWJlcihNYXRoLmNlaWwodGhpcy5udW0gLyB0aGlzLmRlbikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJvdW5kKCk6IFZhbHVlIHtcbiAgICAgICAgaWYgKHRoaXMuZGVuID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU21hbGxFeGFjdE51bWJlcihNYXRoLnJvdW5kKHRoaXMubnVtIC8gdGhpcy5kZW4pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvZygpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5leGFjdE51bWJlcihNYXRoLmxvZyh0aGlzLm51bSAvIHRoaXMuZGVuKSk7XG4gICAgfVxuICAgIGV4cHQocG93ZXI6IFZhbHVlKTogVmFsdWUge1xuICAgICAgICBwb3dlciA9IHBvd2VyLnRvSW5leGFjdCgpO1xuICAgICAgICBpZiAocG93ZXIuaXNJbnRlZ2VyKCkpIHtcbiAgICAgICAgICAgIGxldCBleHAgPSBwb3dlci5udW07XG4gICAgICAgICAgICBsZXQgbnVtID0gTWF0aC5wb3codGhpcy5udW0sIGV4cCk7XG4gICAgICAgICAgICBsZXQgZGVuID0gTWF0aC5wb3codGhpcy5kZW4sIGV4cCk7XG5cbiAgICAgICAgICAgIGlmIChpc1Vuc2FmZUludGVnZXIobnVtKSB8fCBpc1Vuc2FmZUludGVnZXIoZGVuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQmlnRXhhY3QoKS5leHB0KHBvd2VyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTbWFsbEV4YWN0TnVtYmVyKG51bSwgZGVuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSW5leGFjdCgpLmV4cHQocG93ZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cCgpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5leGFjdE51bWJlcihNYXRoLmV4cCh0aGlzLm51bSAvIHRoaXMuZGVuKSk7XG4gICAgfVxuXG4gICAgYW5nbGUoKTogVmFsdWUge1xuICAgICAgIGlmICh0aGlzLmlzTmVnYXRpdmUoKSkge1xuICAgICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5QSSk7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgcmV0dXJuIG5ldyBTbWFsbEV4YWN0TnVtYmVyKDApO1xuICAgICAgIH1cbiAgICB9XG4gICAgYXRhbigpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5leGFjdE51bWJlcihNYXRoLmF0YW4odGhpcy5udW0gLyB0aGlzLmRlbikpO1xuICAgIH1cbiAgICBjb3MoKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5jb3ModGhpcy5udW0gLyB0aGlzLmRlbikpO1xuICAgIH1cbiAgICBzaW4oKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5zaW4odGhpcy5udW0gLyB0aGlzLmRlbikpO1xuICAgIH1cbiAgICBhY29zKCk6IFZhbHVlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmV4YWN0TnVtYmVyKE1hdGguYWNvcyh0aGlzLm51bSAvIHRoaXMuZGVuKSk7XG4gICAgfVxuICAgIGFzaW4oKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIoTWF0aC5hc2luKHRoaXMubnVtIC8gdGhpcy5kZW4pKTtcbiAgICB9XG59XG5cbi8vIFRPRE86IERyb3AgZG93biB0byBTbWFsbEV4YWN0TnVtYmVyIGFzIE5lY2Vzc2FyeVxuZXhwb3J0IGNsYXNzIEJpZ0V4YWN0TnVtYmVyIGV4dGVuZHMgRXhhY3ROdW1iZXIge1xuICAgIHB1YmxpYyByZWFkb25seSBudW06IGJpZ2ludDtcbiAgICBwdWJsaWMgcmVhZG9ubHkgZGVuOiBiaWdpbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihudW06IGJpZ2ludCwgZGVuOiBiaWdpbnQgPSAxbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodHlwZW9mIG51bSA9PT0gJ2JpZ2ludCcgJiYgdHlwZW9mIGRlbiA9PT0gJ2JpZ2ludCcpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgdGhlIG51bWVyYXRvciBjYW4gYmUgbmVnYXRpdmUuXG4gICAgICAgICAgICBpZiAoZGVuIDwgMCkge1xuICAgICAgICAgICAgICAgIG51bSAqPSAtMW47XG4gICAgICAgICAgICAgICAgZGVuICo9IC0xbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGdjZCA9IHRoaXMuZ2NkKG51bSwgZGVuKTtcbiAgICAgICAgICAgIHRoaXMubnVtID0gbnVtIC8gZ2NkO1xuICAgICAgICAgICAgdGhpcy5kZW4gPSBkZW4gLyBnY2Q7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJFeGFjdCB2YWx1ZSBudW1lcmF0b3IgYW5kIGRlbm9taW5hdG9yIHR5cGVzIG11c3QgbWF0Y2hcIilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2NkKGE6IGJpZ2ludCwgYjogYmlnaW50KTogYmlnaW50IHtcbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIHdoaWxlIChiICE9PSAwbikge1xuICAgICAgICAgICAgdCA9IGE7XG4gICAgICAgICAgICBhID0gYjtcbiAgICAgICAgICAgIGIgPSB0ICUgYjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJpZ2ludEFicyhuOiBiaWdpbnQpOiBiaWdpbnQge1xuICAgICAgICBpZiAobiA8IDBuKSB7XG4gICAgICAgICAgICByZXR1cm4gLTFuICogbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG5cbiAgICBpc0Zpbml0ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlzSW5leGFjdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpc0V4YWN0KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaXNJbnRlZ2VyKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kZW4gPT09IDFuO1xuICAgIH1cblxuICAgIHRvSW5leGFjdCgpOiBJbmV4YWN0TnVtYmVyIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IE51bWJlcih0aGlzLm51bSkgLyBOdW1iZXIodGhpcy5kZW4pO1xuICAgICAgICByZXR1cm4gbmV3IEluZXhhY3ROdW1iZXIocmVzdWx0KTtcbiAgICB9XG4gICAgdG9FeGFjdCgpOiBFeGFjdE51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0b1NtYWxsRXhhY3QoKTogU21hbGxFeGFjdE51bWJlciB7XG4gICAgICAgIHJldHVybiBuZXcgU21hbGxFeGFjdE51bWJlcihOdW1iZXIodGhpcy5udW0pLCBOdW1iZXIodGhpcy5kZW4pKTtcbiAgICB9XG4gICAgdG9GaXhudW0oKTogSlNJbnRlZ2VyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9JbmV4YWN0KCkudG9GaXhudW0oKTtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbnVtID0gdGhpcy5iaWdpbnRBYnModGhpcy5udW0gYXMgYmlnaW50KS50b1N0cmluZygpLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgbGV0IGRlbiA9IHRoaXMuYmlnaW50QWJzKHRoaXMuZGVuIGFzIGJpZ2ludCkudG9TdHJpbmcoKS5zbGljZSgwLCAtMSk7XG4gICAgICAgIHJldHVybiBgJHtudW19LyR7ZGVufWA7XG4gICAgfVxuICAgIHRvU2lnbmVkU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLmlzTmVnYXRpdmUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCIrXCIgKyB0aGlzLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgZ3JlYXRlclRoYW4ob3RoZXI6IFZhbHVlKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEluZXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSW5leGFjdCgpLmdyZWF0ZXJUaGFuKG90aGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIFNtYWxsRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdyZWF0ZXJUaGFuKG90aGVyLnRvQmlnRXhhY3QoKSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBCaWdFeGFjdE51bWJlcikge1xuICAgICAgICAgICAgbGV0IHRoaXNWYWwgPSB0aGlzLm51bSAqIG90aGVyLmRlbjtcbiAgICAgICAgICAgIGxldCBvdGhlclZhbCA9IHRoaXMuZGVuICogb3RoZXIuZGVuO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNWYWwgPiBvdGhlclZhbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbXBhcmUgJHt0aGlzfSBhbmQgJHtvdGhlcn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBncmVhdGVyVGhhbk9yRXF1YWwob3RoZXI6IFZhbHVlKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEluZXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSW5leGFjdCgpLmdyZWF0ZXJUaGFuT3JFcXVhbChvdGhlcik7XG4gICAgICAgIH0gZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBTbWFsbEV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ncmVhdGVyVGhhbk9yRXF1YWwob3RoZXIudG9CaWdFeGFjdCgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIEJpZ0V4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICBsZXQgdGhpc1ZhbCA9IHRoaXMubnVtICogb3RoZXIuZGVuO1xuICAgICAgICAgICAgbGV0IG90aGVyVmFsID0gdGhpcy5kZW4gKiBvdGhlci5kZW47XG4gICAgICAgICAgICByZXR1cm4gdGhpc1ZhbCA+PSBvdGhlclZhbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbXBhcmUgJHt0aGlzfSBhbmQgJHtvdGhlcn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXNzVGhhbihvdGhlcjogVmFsdWUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgSW5leGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9JbmV4YWN0KCkubGVzc1RoYW4ob3RoZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgU21hbGxFeGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVzc1RoYW4ob3RoZXIudG9CaWdFeGFjdCgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIEJpZ0V4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICBsZXQgdGhpc1ZhbCA9IHRoaXMubnVtICogb3RoZXIuZGVuO1xuICAgICAgICAgICAgbGV0IG90aGVyVmFsID0gdGhpcy5kZW4gKiBvdGhlci5kZW47XG4gICAgICAgICAgICByZXR1cm4gdGhpc1ZhbCA8IG90aGVyVmFsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29tcGFyZSAke3RoaXN9IGFuZCAke290aGVyfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxlc3NUaGFuT3JFcXVhbChvdGhlcjogVmFsdWUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgSW5leGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9JbmV4YWN0KCkubGVzc1RoYW5PckVxdWFsKG90aGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIFNtYWxsRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlc3NUaGFuT3JFcXVhbChvdGhlci50b0JpZ0V4YWN0KCkpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgQmlnRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIGxldCB0aGlzVmFsID0gdGhpcy5udW0gKiBvdGhlci5kZW47XG4gICAgICAgICAgICBsZXQgb3RoZXJWYWwgPSB0aGlzLmRlbiAqIG90aGVyLmRlbjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzVmFsIDw9IG90aGVyVmFsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29tcGFyZSAke3RoaXN9IGFuZCAke290aGVyfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVxdWFscyhvdGhlcjogVmFsdWUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgSW5leGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9JbmV4YWN0KCkuZXF1YWxzKG90aGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIFNtYWxsRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVxdWFscyhvdGhlci50b0JpZ0V4YWN0KCkpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgQmlnRXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIGxldCB0aGlzVmFsID0gdGhpcy5udW0gKiBvdGhlci5kZW47XG4gICAgICAgICAgICBsZXQgb3RoZXJWYWwgPSB0aGlzLmRlbiAqIG90aGVyLmRlbjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzVmFsID09PSBvdGhlclZhbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbXBhcmUgJHt0aGlzfSBhbmQgJHtvdGhlcn1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlzWmVybygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtID09PSAwbjtcbiAgICB9XG4gICAgaXNQb3NpdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtID4gMG47XG4gICAgfVxuICAgIGlzTmVnYXRpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bSA8IDBuO1xuICAgIH1cblxuICAgIGFkZChvdGhlcjogVmFsdWUpOiBWYWx1ZSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEluZXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSW5leGFjdCgpLmFkZChvdGhlcik7XG4gICAgICAgIH0gZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBTbWFsbEV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQob3RoZXIudG9CaWdFeGFjdCgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIEJpZ0V4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICBsZXQgbnVtID0gKHRoaXMubnVtICogb3RoZXIuZGVuKSArIChvdGhlci5udW0gKiB0aGlzLmRlbik7XG4gICAgICAgICAgICBsZXQgZGVuID0gdGhpcy5kZW4gKiBvdGhlci5kZW47XG5cbiAgICAgICAgICAgIGlmIChpc1NhZmVJbnRlZ2VyKG51bSkgJiYgaXNTYWZlSW50ZWdlcihkZW4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9TbWFsbEV4YWN0KCkuYWRkKG90aGVyLnRvU21hbGxFeGFjdCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaWdFeGFjdE51bWJlcihudW0sIGRlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBhZGQgJHt0aGlzfSBhbmQgJHtvdGhlcn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJ0cmFjdChvdGhlcjogVmFsdWUpOiBWYWx1ZSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEluZXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSW5leGFjdCgpLmFkZChvdGhlcik7XG4gICAgICAgIH0gZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBTbWFsbEV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQob3RoZXIudG9CaWdFeGFjdCgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIEJpZ0V4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICBsZXQgbnVtID0gKHRoaXMubnVtICogb3RoZXIuZGVuKSAtIChvdGhlci5udW0gKiB0aGlzLmRlbik7XG4gICAgICAgICAgICBsZXQgZGVuID0gdGhpcy5kZW4gKiBvdGhlci5kZW47XG5cbiAgICAgICAgICAgIGlmIChpc1NhZmVJbnRlZ2VyKG51bSkgJiYgaXNTYWZlSW50ZWdlcihkZW4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9TbWFsbEV4YWN0KCkuc3VidHJhY3Qob3RoZXIudG9TbWFsbEV4YWN0KCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJpZ0V4YWN0TnVtYmVyKG51bSwgZGVuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHN1YnRyYWN0ICR7dGhpc30gYW5kICR7b3RoZXJ9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbXVsdGlwbHkob3RoZXI6IFZhbHVlKTogVmFsdWUge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBJbmV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0luZXhhY3QoKS5hZGQob3RoZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgU21hbGxFeGFjdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkKG90aGVyLnRvQmlnRXhhY3QoKSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBCaWdFeGFjdE51bWJlcikge1xuICAgICAgICAgICAgbGV0IG51bSA9IHRoaXMubnVtICogb3RoZXIubnVtO1xuICAgICAgICAgICAgbGV0IGRlbiA9IHRoaXMuZGVuICogb3RoZXIuZGVuO1xuXG4gICAgICAgICAgICBpZiAoaXNTYWZlSW50ZWdlcihudW0pICYmIGlzU2FmZUludGVnZXIoZGVuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvU21hbGxFeGFjdCgpLm11bHRpcGx5KG90aGVyLnRvU21hbGxFeGFjdCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaWdFeGFjdE51bWJlcihudW0sIGRlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBtdWx0aXBseSAke3RoaXN9IGFuZCAke290aGVyfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpdmlkZShvdGhlcjogVmFsdWUpOiBWYWx1ZSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEluZXhhY3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSW5leGFjdCgpLmFkZChvdGhlcik7XG4gICAgICAgIH0gZWxzZSBpZiAob3RoZXIgaW5zdGFuY2VvZiBTbWFsbEV4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQob3RoZXIudG9CaWdFeGFjdCgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIEJpZ0V4YWN0TnVtYmVyKSB7XG4gICAgICAgICAgICBsZXQgbnVtID0gdGhpcy5udW0gKiBvdGhlci5kZW47XG4gICAgICAgICAgICBsZXQgZGVuID0gdGhpcy5kZW4gKiBvdGhlci5udW07XG5cbiAgICAgICAgICAgIGlmIChpc1NhZmVJbnRlZ2VyKG51bSkgJiYgaXNTYWZlSW50ZWdlcihkZW4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9TbWFsbEV4YWN0KCkuZGl2aWRlKG90aGVyLnRvU21hbGxFeGFjdCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaWdFeGFjdE51bWJlcihudW0sIGRlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBkaXZpZGUgJHt0aGlzfSBhbmQgJHtvdGhlcn1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG51bWVyYXRvcigpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiBuZXcgQmlnRXhhY3ROdW1iZXIodGhpcy5udW0pO1xuICAgIH1cbiAgICBkZW5vbWluYXRvcigpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiBuZXcgQmlnRXhhY3ROdW1iZXIodGhpcy5kZW4pXG4gICAgfVxuXG4gICAgaW50ZWdlclNxcnQoKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gdGhpcy5zcXJ0KCkuZmxvb3IoKTtcbiAgICB9XG4gICAgc3FydCgpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvU21hbGxFeGFjdCgpLnNxcnQoKTtcbiAgICB9XG4gICAgYWJzKCk6IFZhbHVlIHtcbiAgICAgICAgaWYgKHRoaXMuaXNOZWdhdGl2ZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJpZ0V4YWN0TnVtYmVyKHRoaXMubnVtICogLTFuLCB0aGlzLmRlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbG9vcigpOiBWYWx1ZSB7XG4gICAgICAgIGlmICh0aGlzLmRlbiA9PT0gMW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaWdFeGFjdE51bWJlcih0aGlzLm51bSAvIHRoaXMuZGVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjZWlsaW5nKCk6IFZhbHVlIHtcbiAgICAgICAgaWYgKHRoaXMuZGVuID09PSAxbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJpZ0V4YWN0TnVtYmVyKCh0aGlzLm51bSAvIHRoaXMuZGVuKSArIDFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByb3VuZCgpOiBWYWx1ZSB7XG4gICAgICAgIGlmICh0aGlzLmRlbiA9PT0gMW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZsb29yID0gdGhpcy5mbG9vcigpO1xuICAgICAgICAgICAgbGV0IGZsb29yZGlmZiA9IHRoaXMuc3VidHJhY3QoZmxvb3IpO1xuXG4gICAgICAgICAgICBsZXQgY2VpbCA9IHRoaXMuY2VpbGluZygpO1xuICAgICAgICAgICAgbGV0IGNlaWxkaWZmID0gY2VpbC5zdWJ0cmFjdCh0aGlzKTtcblxuICAgICAgICAgICAgaWYgKGNlaWxkaWZmLmdyZWF0ZXJUaGFuKGZsb29yZGlmZikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2VpbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZsb29yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9nKCk6IFZhbHVlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9TbWFsbEV4YWN0KCkubG9nKCk7XG4gICAgfVxuICAgIGV4cHQocG93ZXI6IFZhbHVlKTogVmFsdWUge1xuICAgICAgICBwb3dlciA9IHBvd2VyLnRvSW5leGFjdCgpO1xuICAgICAgICBpZiAocG93ZXIuaXNJbnRlZ2VyKCkpIHtcbiAgICAgICAgICAgIGxldCBleHAgPSBwb3dlci5udW07XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgZXhwOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQubXVsdGlwbHkodGhpcykgYXMgdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudG9TbWFsbEV4YWN0KCkuZXhwdChwb3dlcik7XG4gICAgfVxuICAgIGV4cCgpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvU21hbGxFeGFjdCgpLmV4cCgpO1xuICAgIH1cblxuICAgIGFuZ2xlKCk6IFZhbHVlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCaWdFeGFjdE51bWJlcigwbik7XG4gICAgfVxuICAgIGF0YW4oKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gdGhpcy50b1NtYWxsRXhhY3QoKS5hdGFuKCk7XG4gICAgfVxuICAgIGNvcygpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvU21hbGxFeGFjdCgpLmNvcygpO1xuICAgIH1cbiAgICBzaW4oKTogVmFsdWUge1xuICAgICAgICByZXR1cm4gdGhpcy50b1NtYWxsRXhhY3QoKS5zaW4oKTtcbiAgICB9XG4gICAgYWNvcygpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvU21hbGxFeGFjdCgpLmFjb3MoKTtcbiAgICB9XG4gICAgYXNpbigpOiBWYWx1ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvU21hbGxFeGFjdCgpLmFzaW4oKTtcbiAgICB9XG59XG5cbmNvbnN0IEVYQUNUX1pFUk8gPSBuZXcgU21hbGxFeGFjdE51bWJlcigwKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBDb25zdGFudHMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmV4cG9ydCBjb25zdCBaRVJPX1ZBTCA9IG5ldyBTbWFsbEV4YWN0TnVtYmVyKDApO1xuZXhwb3J0IGNvbnN0IE9ORV9WQUwgPSBuZXcgU21hbGxFeGFjdE51bWJlcigxKTtcbmV4cG9ydCBjb25zdCBUV09fVkFMID0gbmV3IFNtYWxsRXhhY3ROdW1iZXIoMik7XG5cbmV4cG9ydCBjb25zdCBORUdfT05FX1ZBTCA9IG5ldyBTbWFsbEV4YWN0TnVtYmVyKC0xKTtcblxuZXhwb3J0IGNvbnN0IFBJX1ZBTCA9IG5ldyBJbmV4YWN0TnVtYmVyKE1hdGguUEkpO1xuXG5leHBvcnQgY29uc3QgSU5GX1ZBTCA9IG5ldyBJbmV4YWN0TnVtYmVyKE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XG5leHBvcnQgY29uc3QgTkVHX0lORl9WQUwgPSBuZXcgSW5leGFjdE51bWJlcihOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpO1xuZXhwb3J0IGNvbnN0IE5BTl9WQUwgPSBuZXcgSW5leGFjdE51bWJlcihOdW1iZXIuTmFOKTtcbiIsImltcG9ydCB7IEJveGVkTnVtYmVyIH0gZnJvbSAnLi9Cb3hlZE51bWJlcic7XG5cbmV4cG9ydCB0eXBlIFJhY2tldE51bWJlciA9IEpTSW50ZWdlciB8IEJveGVkTnVtYmVyO1xuXG5leHBvcnQgdHlwZSBKU051bWJlciA9IG51bWJlciB8IGJpZ2ludDtcblxuZXhwb3J0IHR5cGUgSlNJbnRlZ2VyID0gSlNOdW1iZXI7XG5cbmV4cG9ydCBlbnVtIExldmVsIHtcbiAgICBJTlRFR0VSLFxuICAgIFJBVElPTkFMLFxuICAgIFJFQUwsXG4gICAgQ09NUExFWFxufVxuXG4vLyBleHBvcnQgYWJzdHJhY3QgY2xhc3MgQm94ZWROdW1iZXIge1xuLy8gICAgIGFic3RyYWN0IHJlYWRvbmx5IGxldmVsOiBMZXZlbDtcbi8vXG4vLyAgICAgYWJzdHJhY3QgdG9TdHJpbmcoKTogc3RyaW5nO1xuLy8gICAgIC8vIGFic3RyYWN0IGZyb21TdHJpbmcoc3RyOiBzdHJpbmcpOiBCb3hlZE51bWJlcjtcbi8vXG4vLyAgICAgYWJzdHJhY3QgbGlmdFRvKG90aGVyOiBCb3hlZE51bWJlcik6IEJveGVkTnVtYmVyO1xuLy9cbi8vICAgICBhYnN0cmFjdCBpc0Zpbml0ZSgpOiBib29sZWFuO1xuLy8gICAgIGFic3RyYWN0IGlzSW50ZWdlcigpOiBib29sZWFuO1xuLy8gICAgIGFic3RyYWN0IGlzUmF0aW9uYWwoKTogYm9vbGVhbjtcbi8vICAgICBhYnN0cmFjdCBpc1JlYWwoKTogYm9vbGVhbjtcbi8vICAgICBhYnN0cmFjdCBpc0V4YWN0KCk6IGJvb2xlYW47XG4vLyAgICAgYWJzdHJhY3QgaXNQb3NpdGl2ZSgpOiBib29sZWFuO1xuLy8gICAgIGFic3RyYWN0IGNhbkJlRml4bnVtKCk6IGJvb2xlYW47XG4vL1xuLy8gICAgIGFic3RyYWN0IHRvRXhhY3QoKTogQm94ZWROdW1iZXI7XG4vLyAgICAgYWJzdHJhY3QgdG9GaXhudW0oKTogSlNJbnRlZ2VyO1xuLy9cbi8vICAgICBhYnN0cmFjdCBncmVhdGVyVGhhbihvdGhlcjogQm94ZWROdW1iZXIpOiBib29sZWFuO1xuLy8gICAgIGFic3RyYWN0IGdyZWF0ZXJUaGFuT3JFcXVhbChvdGhlcjogQm94ZWROdW1iZXIpOiBib29sZWFuO1xuLy8gICAgIGFic3RyYWN0IGxlc3NUaGFuKG90aGVyOiBCb3hlZE51bWJlcik6IGJvb2xlYW47XG4vLyAgICAgYWJzdHJhY3QgbGVzc1RoYW5PckVxdWFsKG90aGVyOiBCb3hlZE51bWJlcik6IGJvb2xlYW47XG4vLyAgICAgYWJzdHJhY3QgZXF1YWxzKG90aGVyOiBCb3hlZE51bWJlcik6IGJvb2xlYW47XG4vL1xuLy8gICAgIGFic3RyYWN0IGFkZChvdGhlcjogQm94ZWROdW1iZXIpOiBCb3hlZE51bWJlcjtcbi8vICAgICBhYnN0cmFjdCBzdWJ0cmFjdChvdGhlcjogQm94ZWROdW1iZXIpOiBCb3hlZE51bWJlcjtcbi8vICAgICBhYnN0cmFjdCBtdWx0aXBseShvdGhlcjogQm94ZWROdW1iZXIpOiBCb3hlZE51bWJlcjtcbi8vICAgICBhYnN0cmFjdCBkaXZpZGUob3RoZXI6IEJveGVkTnVtYmVyKTogQm94ZWROdW1iZXI7XG4vL1xuLy8gICAgIGFic3RyYWN0IG51bWVyYXRvcigpOiBCb3hlZE51bWJlcjtcbi8vICAgICBhYnN0cmFjdCBkZW5vbWluYXRvcigpOiBCb3hlZE51bWJlcjtcbi8vXG4vLyAgICAgYWJzdHJhY3QgaW50ZWdlclNxcnQoKTogQm94ZWROdW1iZXI7XG4vLyAgICAgYWJzdHJhY3Qgc3FydCgpOiBCb3hlZE51bWJlcjtcbi8vICAgICBhYnN0cmFjdCBhYnMoKTogQm94ZWROdW1iZXI7XG4vLyAgICAgYWJzdHJhY3QgZmxvb3IoKTogQm94ZWROdW1iZXI7XG4vLyAgICAgYWJzdHJhY3QgY2VpbGluZygpOiBCb3hlZE51bWJlcjtcbi8vICAgICBhYnN0cmFjdCByb3VuZCgpOiBCb3hlZE51bWJlcjtcbi8vXG4vLyAgICAgYWJzdHJhY3QgY29uanVnYXRlKCk6IEJveGVkTnVtYmVyO1xuLy8gICAgIGFic3RyYWN0IG1hZ25pdHVkZSgpOiBCb3hlZE51bWJlcjtcbi8vICAgICBhYnN0cmFjdCBpbWFnaW5hcnlQYXJ0KCk6IEJveGVkTnVtYmVyO1xuLy8gICAgIGFic3RyYWN0IHJlYWxQYXJ0KCk6IEJveGVkTnVtYmVyO1xuLy9cbi8vICAgICBhYnN0cmFjdCBsb2coKTogQm94ZWROdW1iZXI7XG4vLyAgICAgYWJzdHJhY3QgZXhwdChwb3dlcjogQm94ZWROdW1iZXIpOiBCb3hlZE51bWJlcjtcbi8vICAgICBhYnN0cmFjdCBleHAoKTogQm94ZWROdW1iZXI7XG4vL1xuLy8gICAgIGFic3RyYWN0IGFuZ2xlKCk6IEJveGVkTnVtYmVyO1xuLy8gICAgIGFic3RyYWN0IGF0YW4oKTogQm94ZWROdW1iZXI7XG4vLyAgICAgYWJzdHJhY3QgY29zKCk6IEJveGVkTnVtYmVyO1xuLy8gICAgIGFic3RyYWN0IHNpbigpOiBCb3hlZE51bWJlcjtcbi8vICAgICBhYnN0cmFjdCBhY29zKCk6IEJveGVkTnVtYmVyO1xuLy8gICAgIGFic3RyYWN0IGFzaW4oKTogQm94ZWROdW1iZXI7XG4vLyB9XG4iLCJpbXBvcnQge1xuICAgIGlzSlNJbnRlZ2VyLFxuICAgIGZhc3RFeHB0XG59IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQge1xuICAgIEluZXhhY3ROdW1iZXIsXG4gICAgU21hbGxFeGFjdE51bWJlcixcbiAgICBCaWdFeGFjdE51bWJlcixcbiAgICBWYWx1ZSxcbiAgICBaRVJPX1ZBTCxcbiAgICBPTkVfVkFMLFxuICAgIFRXT19WQUwsXG4gICAgTkVHX09ORV9WQUwsXG4gICAgUElfVkFMLFxuICAgIElORl9WQUwsXG4gICAgTkVHX0lORl9WQUwsXG4gICAgTkFOX1ZBTFxufSBmcm9tICcuL1ZhbHVlJztcbmltcG9ydCB7XG4gICAgSlNJbnRlZ2VyLFxuICAgIEpTTnVtYmVyLFxuICAgIExldmVsLFxufSBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY2xhc3MgQm94ZWROdW1iZXIge1xuICAgIHB1YmxpYyByZWFkb25seSBsZXZlbDogTGV2ZWw7XG5cbiAgICBwdWJsaWMgcmVhZG9ubHkgcmVhbDogVmFsdWU7XG4gICAgcHVibGljIHJlYWRvbmx5IGltYWc6IFZhbHVlO1xuXG4gICAgY29uc3RydWN0b3IocmVhbDogVmFsdWUsIGltYWc/OiBWYWx1ZSkge1xuICAgICAgICB0aGlzLnJlYWwgPSByZWFsO1xuXG4gICAgICAgIGlmIChpbWFnID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZyA9IFpFUk9fVkFMO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbWFnID0gaW1hZztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsZXZlbDtcbiAgICAgICAgaWYgKHRoaXMuaXNJbnRlZ2VyKCkpIHtcbiAgICAgICAgICAgIGxldmVsID0gTGV2ZWwuSU5URUdFUjtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzUmF0aW9uYWwoKSkge1xuICAgICAgICAgICAgbGV2ZWwgPSBMZXZlbC5SQVRJT05BTDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzUmVhbCgpKSB7XG4gICAgICAgICAgICBsZXZlbCA9IExldmVsLlJFQUw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXZlbCA9IExldmVsLkNPTVBMRVg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgbWFrZUluc3RhbmNlKHJlYWw6IEpTTnVtYmVyKTogQm94ZWROdW1iZXI7XG5cbiAgICBwdWJsaWMgc3RhdGljIG1ha2VJbnN0YW5jZShyZWFsOiBiaWdpbnQsIGltYWc6IGJpZ2ludCk6IEJveGVkTnVtYmVyO1xuICAgIHB1YmxpYyBzdGF0aWMgbWFrZUluc3RhbmNlKHJlYWw6IGJpZ2ludCwgcmVhbERlbjogYmlnaW50KTogQm94ZWROdW1iZXI7XG4gICAgcHVibGljIHN0YXRpYyBtYWtlSW5zdGFuY2UocmVhbDogYmlnaW50LCByZWFsRGVuOiBiaWdpbnQsIGltYWc6IGJpZ2ludCwgaW1hZ0RlbjogYmlnaW50KTogQm94ZWROdW1iZXI7XG5cbiAgICBwdWJsaWMgc3RhdGljIG1ha2VJbnN0YW5jZShyZWFsOiBudW1iZXIsIGltYWc6IG51bWJlcik6IEJveGVkTnVtYmVyO1xuICAgIHB1YmxpYyBzdGF0aWMgbWFrZUluc3RhbmNlKHJlYWw6IG51bWJlciwgcmVhbERlbjogbnVtYmVyKTogQm94ZWROdW1iZXI7XG4gICAgcHVibGljIHN0YXRpYyBtYWtlSW5zdGFuY2UocmVhbDogbnVtYmVyLCByZWFsRGVuOiBudW1iZXIsIGltYWc6IG51bWJlciwgIGltYWdEZW46IG51bWJlcik6IEJveGVkTnVtYmVyO1xuXG4gICAgcHVibGljIHN0YXRpYyBtYWtlSW5zdGFuY2UocmVhbDogSlNOdW1iZXIsIHJlYWxEZW4/OiBKU0ludGVnZXIsIGltYWc/OiBKU051bWJlciwgaW1hZ0Rlbj86IEpTSW50ZWdlcik6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgbGV0IGlzUmVhbCA9IGltYWcgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGlzUmVhbCAmJiBpbWFnRGVuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBzcGVjaWZ5IGJvdGggYSBudW1lcmF0b3IgYW5kIGRlbm9taW5hdG9yLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlYWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBpbWFnID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGltYWcgPSAwbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkZW5vbWluYXRvcnNFeGlzdCA9IHJlYWxEZW4gIT09IHVuZGVmaW5lZCAmJiBpbWFnRGVuICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghZGVub21pbmF0b3JzRXhpc3QgJiYgKHJlYWxEZW4gIT09IHVuZGVmaW5lZCB8fCBpbWFnRGVuICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWFsIGFuZCBpbWFnaW5hcnkgcGFydCBtdXN0IGJlIHRoZSBzYW1lIGV4YWN0bmVzcy5cIilcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjb21wb25lbnRzQXJlSW50ZWdlcnM7XG4gICAgICAgIGlmIChkZW5vbWluYXRvcnNFeGlzdCkge1xuICAgICAgICAgICAgY29tcG9uZW50c0FyZUludGVnZXJzID0gaXNKU0ludGVnZXIocmVhbClcbiAgICAgICAgICAgICAgICAmJiBpc0pTSW50ZWdlcihpbWFnKVxuICAgICAgICAgICAgICAgICYmIGlzSlNJbnRlZ2VyKHJlYWxEZW4pXG4gICAgICAgICAgICAgICAgJiYgaXNKU0ludGVnZXIoaW1hZ0Rlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb21wb25lbnRzQXJlSW50ZWdlcnMgPSBpc0pTSW50ZWdlcihyZWFsKVxuICAgICAgICAgICAgICAgICYmIGlzSlNJbnRlZ2VyKGltYWcpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgdHlwZXNBcmVTYW1lO1xuICAgICAgICBpZiAoZGVub21pbmF0b3JzRXhpc3QpIHtcbiAgICAgICAgICAgIHR5cGVzQXJlU2FtZSA9IHR5cGVvZiByZWFsID09PSB0eXBlb2YgaW1hZ1xuICAgICAgICAgICAgICAgICYmIHR5cGVvZiByZWFsRGVuID09PSB0eXBlb2YgaW1hZ0RlblxuICAgICAgICAgICAgICAgICYmIHR5cGVvZiByZWFsID09PSB0eXBlb2YgcmVhbERlbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHR5cGVzQXJlU2FtZSA9IHR5cGVvZiByZWFsID09PSB0eXBlb2YgaW1hZztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXR5cGVzQXJlU2FtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFsbCBtYWtlSW5zdGFuY2UgYXJndW1lbnRzIG11c3QgYmUgdGhlIHNhbWUgdHlwZS5cIilcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpc0JpZyA9IHR5cGVvZiByZWFsID09PSAnYmlnaW50JztcblxuICAgICAgICBsZXQgcmVhbFZhbCwgaW1hZ1ZhbDtcbiAgICAgICAgaWYgKGRlbm9taW5hdG9yc0V4aXN0KSB7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50c0FyZUludGVnZXJzICYmIGlzQmlnKSB7XG4gICAgICAgICAgICAgICAgcmVhbFZhbCA9IG5ldyBCaWdFeGFjdE51bWJlcihyZWFsIGFzIGJpZ2ludCwgcmVhbERlbiBhcyBiaWdpbnQpO1xuICAgICAgICAgICAgICAgIGltYWdWYWwgPSBuZXcgQmlnRXhhY3ROdW1iZXIoaW1hZyBhcyBiaWdpbnQsIGltYWdEZW4gYXMgYmlnaW50KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tcG9uZW50c0FyZUludGVnZXJzKSB7XG4gICAgICAgICAgICAgICAgcmVhbFZhbCA9IG5ldyBTbWFsbEV4YWN0TnVtYmVyKHJlYWwgYXMgbnVtYmVyLCByZWFsRGVuIGFzIG51bWJlcik7XG4gICAgICAgICAgICAgICAgaW1hZ1ZhbCA9IG5ldyBTbWFsbEV4YWN0TnVtYmVyKGltYWcgYXMgbnVtYmVyLCBpbWFnRGVuIGFzIG51bWJlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJOdW1lcmF0b3IgYW5kIGRlbm9taW5hdG9yIG11c3QgYmUgaW50ZWdlcnMuXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50c0FyZUludGVnZXJzICYmIGlzQmlnKSB7XG4gICAgICAgICAgICAgICAgcmVhbFZhbCA9IG5ldyBCaWdFeGFjdE51bWJlcihyZWFsIGFzIGJpZ2ludCk7XG4gICAgICAgICAgICAgICAgaW1hZ1ZhbCA9IG5ldyBCaWdFeGFjdE51bWJlcihpbWFnIGFzIGJpZ2ludCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBvbmVudHNBcmVJbnRlZ2Vycykge1xuICAgICAgICAgICAgICAgIHJlYWxWYWwgPSBuZXcgU21hbGxFeGFjdE51bWJlcihyZWFsIGFzIG51bWJlcik7XG4gICAgICAgICAgICAgICAgaW1hZ1ZhbCA9IG5ldyBTbWFsbEV4YWN0TnVtYmVyKGltYWcgYXMgbnVtYmVyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVhbFZhbCA9IG5ldyBJbmV4YWN0TnVtYmVyKHJlYWwgYXMgbnVtYmVyKTtcbiAgICAgICAgICAgICAgICBpbWFnVmFsID0gbmV3IEluZXhhY3ROdW1iZXIoaW1hZyBhcyBudW1iZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBCb3hlZE51bWJlcihyZWFsVmFsLCBpbWFnVmFsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWFsKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWwudG9TdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWwudG9TdHJpbmcoKSArIHRoaXMuaW1hZy50b1NpZ25lZFN0cmluZygpICsgXCJpXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgbGlmdFRvKG90aGVyOiBCb3hlZE51bWJlcik6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAvLyBzd2l0Y2ggKG90aGVyLmxldmVsKSB7XG4gICAgICAgICAgICAvLyBjYXNlIExldmVsLklOVEVHRVI6XG4gICAgICAgICAgICAgICAgLy8gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBsaWZ0IHRvIGxvd2VyIGxldmVsLlwiKVxuICAgICAgICAgICAgLy8gY2FzZSBMZXZlbC5SQVRJT05BTDpcbiAgICAgICAgICAgICAgICAvLyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGxpZnQgdG8gbG93ZXIgbGV2ZWwuXCIpXG4gICAgICAgICAgICAvLyBjYXNlIExldmVsLlJFQUw6XG4gICAgICAgICAgICAgICAgLy8gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBsaWZ0IHRvIGxvd2VyIGxldmVsLlwiKVxuICAgICAgICAgICAgLy8gY2FzZSBMZXZlbC5DT01QTEVYOlxuICAgICAgICAgICAgICAgIC8vIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgLy8gZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBsZXQgX2V4YXVzdGl2ZVNlYXJjaDogbmV2ZXIgPSBvdGhlci5sZXZlbDtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gb3RoZXI7XG4gICAgICAgIC8vIH1cbiAgICB9XG4gICAgLy8gcHJvdGVjdGVkIHN0YXRpYyBtYXRjaExldmVsKGZpcnN0OiBCb3hlZE51bWJlciwgc2Vjb25kOiBCb3hlZE51bWJlcik6IEJveGVkTnVtYmVyW10ge1xuICAgICAgICAvLyBpZiAoZmlyc3QubGV2ZWwgPT09IHNlY29uZC5sZXZlbCkge1xuICAgICAgICAgICAgLy8gcmV0dXJuIFtzZWNvbmQsIHNlY29uZF07XG4gICAgICAgIC8vIH0gZWxzZSBpZiAoZmlyc3QubGV2ZWwgPiBzZWNvbmQubGV2ZWwpIHtcbi8vXG4gICAgICAgIC8vIH1cbiAgICAvLyB9XG5cbiAgICBwdWJsaWMgaXNJbnRlZ2VyKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFsLmlzSW50ZWdlcigpICYmIHRoaXMuaW1hZy5pc0ludGVnZXIoKTtcbiAgICB9XG4gICAgcHVibGljIGlzUmF0aW9uYWwoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRmluaXRlKCk7XG4gICAgfVxuICAgIHB1YmxpYyBpc0Zpbml0ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbC5pc0Zpbml0ZSgpICYmIHRoaXMuaW1hZy5pc0Zpbml0ZSgpO1xuICAgIH1cbiAgICBwdWJsaWMgaXNSZWFsKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnLmlzWmVybygpICYmIHRoaXMuaW1hZy5pc0V4YWN0KCk7XG4gICAgfVxuICAgIHB1YmxpYyBpc0NvbXBsZXgoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBwdWJsaWMgaXNFeGFjdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbC5pc0V4YWN0KCkgJiYgdGhpcy5pbWFnLmlzRXhhY3QoKTtcbiAgICB9XG4gICAgcHVibGljIGlzSW5leGFjdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzRXhhY3QoKTtcbiAgICB9XG4gICAgcHVibGljIGlzUG9zaXRpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdGhpcy5pc1JlYWwoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBkZWZpbmVkIGZvciBjb21wbGV4IG51bWJlcnMuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWwuaXNQb3NpdGl2ZSgpO1xuICAgIH1cbiAgICAvLyBwdWJsaWMgY2FuQmVGaXhudW0oKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIHJldHVybiB0aGlzLmlzUmVhbCgpICYmIHRoaXMuaXNJbnRlZ2VyKCkgJiYgdGhpcy5pc0V4YWN0KCk7XG4gICAgLy8gfVxuXG4gICAgcHVibGljIHRvRXhhY3QoKTogQm94ZWROdW1iZXIge1xuICAgICAgICByZXR1cm4gbmV3IEJveGVkTnVtYmVyKHRoaXMucmVhbC50b0V4YWN0KCksIHRoaXMuaW1hZy50b0V4YWN0KCkpO1xuICAgIH1cbiAgICBwdWJsaWMgdG9GaXhudW0oKTogSlNJbnRlZ2VyIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUmVhbCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGRlZmluZWQgZm9yIGNvbXBsZXggbnVtYmVycy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbC50b0ZpeG51bSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBncmVhdGVyVGhhbihvdGhlcjogQm94ZWROdW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUmVhbCgpIHx8ICFvdGhlci5pc1JlYWwoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR3JlYXRlciB0aGFuIG5vdCBkZWZpbmVkIGZvciBjb21wbGV4IG51bWJlcnMuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWwuZ3JlYXRlclRoYW4ob3RoZXIucmVhbCk7XG4gICAgfVxuICAgIHB1YmxpYyBncmVhdGVyVGhhbk9yRXF1YWwob3RoZXI6IEJveGVkTnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdGhpcy5pc1JlYWwoKSB8fCAhb3RoZXIuaXNSZWFsKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdyZWF0ZXIgdGhhbiBvciBlcXVhbCBub3QgZGVmaW5lZCBmb3IgY29tcGxleCBudW1iZXJzLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZWFsLmdyZWF0ZXJUaGFuT3JFcXVhbChvdGhlci5yZWFsKTtcbiAgICB9XG4gICAgcHVibGljIGxlc3NUaGFuKG90aGVyOiBCb3hlZE51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXRoaXMuaXNSZWFsKCkgfHwgIW90aGVyLmlzUmVhbCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMZXNzIHRoYW4gbm90IGRlZmluZWQgZm9yIGNvbXBsZXggbnVtYmVycy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbC5sZXNzVGhhbihvdGhlci5yZWFsKTtcbiAgICB9XG4gICAgcHVibGljIGxlc3NUaGFuT3JFcXVhbChvdGhlcjogQm94ZWROdW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUmVhbCgpIHx8ICFvdGhlci5pc1JlYWwoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGVzcyB0aGFuIG9yIGVxdWFsIG5vdCBkZWZpbmVkIGZvciBjb21wbGV4IG51bWJlcnMuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWwubGVzc1RoYW5PckVxdWFsKG90aGVyLnJlYWwpO1xuICAgIH1cbiAgICBwdWJsaWMgZXF1YWxzKG90aGVyOiBCb3hlZE51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFsLmVxdWFscyhvdGhlci5yZWFsKSAmJiB0aGlzLmltYWcuZXF1YWxzKG90aGVyLmltYWcpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGQob3RoZXI6IEJveGVkTnVtYmVyKTogQm94ZWROdW1iZXIge1xuICAgICAgICByZXR1cm4gbmV3IEJveGVkTnVtYmVyKHRoaXMucmVhbC5hZGQob3RoZXIucmVhbCksIHRoaXMuaW1hZy5hZGQob3RoZXIuaW1hZykpO1xuICAgIH1cbiAgICBwdWJsaWMgc3VidHJhY3Qob3RoZXI6IEJveGVkTnVtYmVyKTogQm94ZWROdW1iZXIge1xuICAgICAgICByZXR1cm4gbmV3IEJveGVkTnVtYmVyKHRoaXMucmVhbC5zdWJ0cmFjdChvdGhlci5yZWFsKSwgdGhpcy5pbWFnLnN1YnRyYWN0KG90aGVyLmltYWcpKTtcbiAgICB9XG4gICAgcHVibGljIG11bHRpcGx5KG90aGVyOiBCb3hlZE51bWJlcik6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgbGV0IHJlYWwgPSB0aGlzLnJlYWwubXVsdGlwbHkob3RoZXIucmVhbCkuc3VidHJhY3QodGhpcy5pbWFnLm11bHRpcGx5KG90aGVyLmltYWcpKTtcbiAgICAgICAgbGV0IGltYWcgPSB0aGlzLnJlYWwubXVsdGlwbHkob3RoZXIuaW1hZykuYWRkKHRoaXMuaW1hZy5tdWx0aXBseShvdGhlci5yZWFsKSk7XG4gICAgICAgIHJldHVybiBuZXcgQm94ZWROdW1iZXIocmVhbCwgaW1hZyk7XG4gICAgfVxuICAgIHB1YmxpYyBkaXZpZGUob3RoZXI6IEJveGVkTnVtYmVyKTogQm94ZWROdW1iZXIge1xuICAgICAgICAvLyBJZiB0aGUgb3RoZXIgdmFsdWUgaXMgcmVhbCwganVzdCBkbyBwcmltaXRpdmUgZGl2aXNpb25cbiAgICAgICAgaWYgKG90aGVyLmlzUmVhbCgpKSB7XG4gICAgICAgICAgICBsZXQgcmVhbCA9IHRoaXMucmVhbC5kaXZpZGUob3RoZXIucmVhbCk7XG4gICAgICAgICAgICBsZXQgaW1hZyA9IHRoaXMuaW1hZy5kaXZpZGUob3RoZXIucmVhbCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJveGVkTnVtYmVyKHJlYWwsIGltYWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGEsIGIsIGMsIGQsIHIsIHgsIHk7XG4gICAgICAgIGlmICh0aGlzLmlzSW5leGFjdCgpIHx8IG90aGVyLmlzSW5leGFjdCgpKSB7XG4gICAgICAgICAgICAvLyBodHRwOi8vcG9ydGFsLmFjbS5vcmcvY2l0YXRpb24uY2ZtP2lkPTEwMzk4MTRcbiAgICAgICAgICAgIC8vIFdlIGN1cnJlbnRseSB1c2UgU21pdGgncyBtZXRob2QsIHRob3VnaCB3ZSBzaG91bGRcbiAgICAgICAgICAgIC8vIHByb2JhYmx5IHN3aXRjaCBvdmVyIHRvIFByaWVzdCdzIG1ldGhvZC5cbiAgICAgICAgICAgIGEgPSB0aGlzLnJlYWw7XG4gICAgICAgICAgICBiID0gdGhpcy5pbWFnO1xuICAgICAgICAgICAgYyA9IG90aGVyLnJlYWw7XG4gICAgICAgICAgICBkID0gb3RoZXIuaW1hZztcbiAgICAgICAgICAgIGlmIChkLmFicygpLmxlc3NUaGFuT3JFcXVhbChjLmFicygpKSkge1xuICAgICAgICAgICAgICAgIHIgPSBkLmRpdmlkZShjKTtcbiAgICAgICAgICAgICAgICB4ID0gYS5hZGQoYi5tdWx0aXBseShyKSkuZGl2aWRlKGMuYWRkKGQubXVsdGlwbHkocikpKTtcbiAgICAgICAgICAgICAgICB5ID0gYi5zdWJ0cmFjdChhLm11bHRpcGx5KHIpKS5kaXZpZGUoYy5hZGQoZC5tdWx0aXBseShyKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByID0gYy5kaXZpZGUoZCk7XG4gICAgICAgICAgICAgICAgeCA9IGEubXVsdGlwbHkocikuYWRkKGIpLmRpdmlkZShjLm11bHRpcGx5KHIpLmFkZChkKSk7XG4gICAgICAgICAgICAgICAgeSA9IGIubXVsdGlwbHkocikuc3VidHJhY3QoYSkuZGl2aWRlKGMubXVsdGlwbHkocikuYWRkKGQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgQm94ZWROdW1iZXIoeCwgeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgY29uID0gb3RoZXIuY29uanVnYXRlKCk7XG4gICAgICAgICAgICB2YXIgdXAgPSB0aGlzLm11bHRpcGx5KGNvbik7XG5cbiAgICAgICAgICAgIC8vIERvd24gaXMgZ3VhcmFudGVlZCB0byBiZSByZWFsIGJ5IHRoaXMgcG9pbnQuXG4gICAgICAgICAgICB2YXIgZG93biA9IG90aGVyLm11bHRpcGx5KGNvbikucmVhbFBhcnQoKTtcblxuICAgICAgICAgICAgbGV0IHJlYWwgPSB1cC5yZWFsUGFydCgpLmRpdmlkZShkb3duKS5yZWFsO1xuICAgICAgICAgICAgbGV0IGltYWcgPSB1cC5pbWFnaW5hcnlQYXJ0KCkuZGl2aWRlKGRvd24pLnJlYWw7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJveGVkTnVtYmVyKHJlYWwsIGltYWcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG51bWVyYXRvcigpOiBCb3hlZE51bWJlciB7XG4gICAgICAgIGlmICghdGhpcy5pc1JlYWwoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTnVtZXJhdG9yIG5vdCBkZWZpbmVkIGZvciBjb21wbGV4IG51bWJlcnMuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQm94ZWROdW1iZXIodGhpcy5yZWFsLm51bWVyYXRvcigpKTtcbiAgICB9XG4gICAgcHVibGljIGRlbm9taW5hdG9yKCk6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUmVhbCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZW5vbWluYXRvciBub3QgZGVmaW5lZCBmb3IgY29tcGxleCBudW1iZXJzLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEJveGVkTnVtYmVyKHRoaXMucmVhbC5kZW5vbWluYXRvcigpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50ZWdlclNxcnQoKTogQm94ZWROdW1iZXIge1xuICAgICAgICBpZiAodGhpcy5pc0ludGVnZXIoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3hlZE51bWJlcih0aGlzLnJlYWwuaW50ZWdlclNxcnQoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnRlZ2VyU3FydCBvbmx5IGRlZmluZWQgZm9yIGludGVnZXJzLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgc3FydCgpOiBCb3hlZE51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVhbCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJveGVkTnVtYmVyKHRoaXMucmVhbC5zcXJ0KCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TcXVhcmVfcm9vdCNTcXVhcmVfcm9vdHNfb2ZfbmVnYXRpdmVfYW5kX2NvbXBsZXhfbnVtYmVyc1xuICAgICAgICBsZXQgbWFnID0gdGhpcy5tYWduaXR1ZGUoKS5yZWFsO1xuICAgICAgICBsZXQgcl9wbHVzX3ggPSBtYWcuYWRkKHRoaXMucmVhbCk7XG5cbiAgICAgICAgbGV0IHJlYWwgPSByX3BsdXNfeC5kaXZpZGUobmV3IFNtYWxsRXhhY3ROdW1iZXIoMikpLnNxcnQoKTtcbiAgICAgICAgbGV0IGltYWcgPSB0aGlzLmltYWcuZGl2aWRlKHJfcGx1c194Lm11bHRpcGx5KG5ldyBTbWFsbEV4YWN0TnVtYmVyKDIpKS5zcXJ0KCkpO1xuXG4gICAgICAgIHJldHVybiBuZXcgQm94ZWROdW1iZXIocmVhbCwgaW1hZyk7XG4gICAgfVxuICAgIHB1YmxpYyBhYnMoKTogQm94ZWROdW1iZXIge1xuICAgICAgICBpZiAoIXRoaXMuaXNSZWFsKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImFicyBpcyBub3QgZGVmaW5lZCBmb3IgY29tcGxleCBudW1iZXJzLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEJveGVkTnVtYmVyKHRoaXMucmVhbC5hYnMoKSk7XG4gICAgfVxuICAgIHB1YmxpYyBmbG9vcigpOiBCb3hlZE51bWJlciB7XG4gICAgICAgIGlmICghdGhpcy5pc1JlYWwoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZmxvb3IgaXMgbm90IGRlZmluZWQgZm9yIGNvbXBsZXggbnVtYmVycy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCb3hlZE51bWJlcih0aGlzLnJlYWwuZmxvb3IoKSk7XG4gICAgfVxuICAgIHB1YmxpYyBjZWlsaW5nKCk6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUmVhbCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjZWlsaW5nIGlzIG5vdCBkZWZpbmVkIGZvciBjb21wbGV4IG51bWJlcnMuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQm94ZWROdW1iZXIodGhpcy5yZWFsLmNlaWxpbmcoKSk7XG4gICAgfVxuICAgIHB1YmxpYyByb3VuZCgpOiBCb3hlZE51bWJlciB7XG4gICAgICAgIGlmICghdGhpcy5pc1JlYWwoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwicm91bmQgaXMgbm90IGRlZmluZWQgZm9yIGNvbXBsZXggbnVtYmVycy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCb3hlZE51bWJlcih0aGlzLnJlYWwucm91bmQoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbmp1Z2F0ZSgpOiBCb3hlZE51bWJlciB7XG4gICAgICAgIHJldHVybiBuZXcgQm94ZWROdW1iZXIodGhpcy5yZWFsLCBuZXcgU21hbGxFeGFjdE51bWJlcigwKS5zdWJ0cmFjdCh0aGlzLmltYWcpKTtcbiAgICB9XG4gICAgcHVibGljIG1hZ25pdHVkZSgpOiBCb3hlZE51bWJlciB7XG4gICAgICAgIGxldCByZWFsU3FyID0gdGhpcy5yZWFsLm11bHRpcGx5KHRoaXMucmVhbCk7XG4gICAgICAgIGxldCBpbWFnU3FyID0gdGhpcy5pbWFnLm11bHRpcGx5KHRoaXMuaW1hZyk7XG4gICAgICAgIGxldCBzdW0gPSByZWFsU3FyLmFkZChpbWFnU3FyKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCb3hlZE51bWJlcihzdW0uc3FydCgpKTtcbiAgICB9XG4gICAgcHVibGljIHJlYWxQYXJ0KCk6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCb3hlZE51bWJlcih0aGlzLnJlYWwpO1xuICAgIH1cbiAgICBwdWJsaWMgaW1hZ2luYXJ5UGFydCgpOiBCb3hlZE51bWJlciB7XG4gICAgICAgIHJldHVybiBuZXcgQm94ZWROdW1iZXIodGhpcy5pbWFnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbG9nKCk6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgbGV0IG1hZyA9IHRoaXMubWFnbml0dWRlKCk7XG4gICAgICAgIGxldCB0aGV0YSA9IHRoaXMuYW5nbGUoKTtcblxuICAgICAgICByZXR1cm4gbWFnLmxvZygpLmFkZCh0aGV0YS5tdWx0aXBseShJKSk7XG4gICAgfVxuICAgIHB1YmxpYyBleHB0KHBvd2VyOiBCb3hlZE51bWJlcik6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFeGFjdCgpICYmIHRoaXMuaXNJbnRlZ2VyKCkgJiYgcG93ZXIuZ3JlYXRlclRoYW5PckVxdWFsKFpFUk8pKSB7XG4gICAgICAgICAgICBsZXQgbiA9IHRoaXMucmVhbC50b0ZpeG51bSgpO1xuICAgICAgICAgICAgbGV0IGsgPSBwb3dlci5yZWFsLnRvRml4bnVtKCk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZmFzdEV4cHQobiwgayk7XG5cbiAgICAgICAgICAgIGxldCByZXN1bHRWYWx1ZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlID0gbmV3IFNtYWxsRXhhY3ROdW1iZXIocmVzdWx0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0VmFsdWUgPSBuZXcgQmlnRXhhY3ROdW1iZXIocmVzdWx0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3hlZE51bWJlcihyZXN1bHRWYWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZXhwbyA9IHBvd2VyLm11bHRpcGx5KHRoaXMubG9nKCkpO1xuICAgICAgICByZXR1cm4gZXhwby5leHAoKTtcbiAgICB9XG4gICAgcHVibGljIGV4cCgpOiBCb3hlZE51bWJlciB7XG4gICAgICAgIGxldCByID0gbmV3IEJveGVkTnVtYmVyKHRoaXMucmVhbC5leHAoKSk7XG4gICAgICAgIGxldCBjb3NfYSA9IG5ldyBCb3hlZE51bWJlcih0aGlzLmltYWcuY29zKCkpO1xuICAgICAgICBsZXQgc2luX2EgPSBuZXcgQm94ZWROdW1iZXIodGhpcy5pbWFnLnNpbigpKTtcblxuICAgICAgICByZXR1cm4gci5tdWx0aXBseShjb3NfYS5hZGQoc2luX2EubXVsdGlwbHkoSSkpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYW5nbGUoKTogQm94ZWROdW1iZXIge1xuICAgICAgICBpZiAodGhpcy5pc1JlYWwoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3hlZE51bWJlcih0aGlzLnJlYWwuYW5nbGUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVhbC5lcXVhbHMoWkVST19WQUwpKSB7XG4gICAgICAgICAgICBsZXQgaGFsZlBJID0gUEkuZGl2aWRlKFRXTyk7XG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnLmdyZWF0ZXJUaGFuKFpFUk9fVkFMKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYWxmUEk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYWxmUEkubXVsdGlwbHkoTkVHX09ORSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdG1wID0gdGhpcy5pbWFnaW5hcnlQYXJ0KCkuYWJzKCkuZGl2aWRlKHRoaXMucmVhbFBhcnQoKS5hYnMoKSkuYXRhbigpO1xuICAgICAgICBpZiAodGhpcy5yZWFsUGFydCgpLmdyZWF0ZXJUaGFuKFpFUk8pKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnaW5hcnlQYXJ0KCkuZ3JlYXRlclRoYW4oWkVSTykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wLm11bHRpcGx5KE5FR19PTkUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2luYXJ5UGFydCgpLmdyZWF0ZXJUaGFuKFpFUk8pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBJLnN1YnRyYWN0KHRtcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0bXAuc3VidHJhY3QoUEkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBhdGFuKCk6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuZXF1YWxzKEkpIHx8IHRoaXMuZXF1YWxzKE5FR19JKSkge1xuICAgICAgICAgICAgcmV0dXJuIE5FR19JTkY7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEkubXVsdGlwbHkoSEFMRi5tdWx0aXBseShJLmFkZCh0aGlzKS5kaXZpZGUoSS5hZGQoWkVSTy5zdWJ0cmFjdCh0aGlzKSkpLmxvZygpKSk7XG4gICAgfVxuICAgIHB1YmxpYyBjb3MoKTogQm94ZWROdW1iZXIge1xuICAgICAgICBpZiAodGhpcy5pc1JlYWwoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3hlZE51bWJlcih0aGlzLnJlYWwuY29zKCkpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpeiA9IHRoaXMubXVsdGlwbHkoSSk7XG4gICAgICAgIGxldCBpel9uZWdhdGUgPSBpei5tdWx0aXBseShORUdfT05FKTtcbiAgICAgICAgcmV0dXJuIGl6LmV4cCgpLmFkZChpel9uZWdhdGUuZXhwKCkpLmRpdmlkZShUV08pO1xuICAgIH1cbiAgICBwdWJsaWMgc2luKCk6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWFsKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQm94ZWROdW1iZXIodGhpcy5yZWFsLnNpbigpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaXogPSB0aGlzLm11bHRpcGx5KEkpO1xuICAgICAgICBsZXQgaXpfbmVnYXRlID0gaXoubXVsdGlwbHkoTkVHX09ORSk7XG4gICAgICAgIGxldCB6MiA9IG5ldyBCb3hlZE51bWJlcihaRVJPX1ZBTCwgVFdPX1ZBTCk7XG4gICAgICAgIGxldCBleHBfbmVnYXRlID0gaXouZXhwKCkuc3VidHJhY3QoaXpfbmVnYXRlLmV4cCgpKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGV4cF9uZWdhdGUuZGl2aWRlKHoyKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcHVibGljIGFjb3MoKTogQm94ZWROdW1iZXIge1xuICAgICAgICBpZiAodGhpcy5pc1JlYWwoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3hlZE51bWJlcih0aGlzLnJlYWwuYWNvcygpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGlfaGFsZiA9IFBJLmRpdmlkZShUV08pO1xuICAgICAgICBsZXQgaXogPSB0aGlzLm11bHRpcGx5KEkpO1xuICAgICAgICBsZXQgcm9vdCA9IE9ORS5zdWJ0cmFjdCh0aGlzLm11bHRpcGx5KHRoaXMpKS5zcXJ0KCk7XG4gICAgICAgIGxldCBsID0gaXouYWRkKHJvb3QpLmxvZygpLm11bHRpcGx5KEkpO1xuICAgICAgICByZXR1cm4gcGlfaGFsZi5hZGQobCk7XG4gICAgfVxuICAgIHB1YmxpYyBhc2luKCk6IEJveGVkTnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWFsKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQm94ZWROdW1iZXIodGhpcy5yZWFsLmFzaW4oKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9uZU5lZ2F0ZVRoaXNTcSA9IE9ORS5zdWJ0cmFjdCh0aGlzLm11bHRpcGx5KHRoaXMpKTtcbiAgICAgICAgbGV0IHNxcnRPbmVOZWdhdGVUaGlzU3EgPSBvbmVOZWdhdGVUaGlzU3Euc3FydCgpO1xuICAgICAgICByZXR1cm4gVFdPLm11bHRpcGx5KHRoaXMuZGl2aWRlKE9ORS5hZGQoc3FydE9uZU5lZ2F0ZVRoaXNTcSkpLmF0YW4oKSk7XG4gICAgfVxufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBDb25zdGFudHMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmV4cG9ydCBjb25zdCBaRVJPID0gbmV3IEJveGVkTnVtYmVyKFpFUk9fVkFMKTtcbmV4cG9ydCBjb25zdCBPTkUgPSBuZXcgQm94ZWROdW1iZXIoT05FX1ZBTCk7XG5leHBvcnQgY29uc3QgVFdPID0gbmV3IEJveGVkTnVtYmVyKFRXT19WQUwpO1xuXG5leHBvcnQgY29uc3QgSEFMRiA9IE9ORS5kaXZpZGUoVFdPKTtcblxuZXhwb3J0IGNvbnN0IE5FR19PTkUgPSBuZXcgQm94ZWROdW1iZXIoTkVHX09ORV9WQUwpO1xuXG5leHBvcnQgY29uc3QgSSA9IG5ldyBCb3hlZE51bWJlcihaRVJPX1ZBTCwgT05FX1ZBTCk7XG5leHBvcnQgY29uc3QgTkVHX0kgPSBuZXcgQm94ZWROdW1iZXIoWkVST19WQUwsIE5FR19PTkVfVkFMKTtcblxuZXhwb3J0IGNvbnN0IFBJID0gbmV3IEJveGVkTnVtYmVyKFBJX1ZBTCk7XG5cbmV4cG9ydCBjb25zdCBJTkYgPSBuZXcgQm94ZWROdW1iZXIoSU5GX1ZBTCk7XG5leHBvcnQgY29uc3QgTkVHX0lORiA9IG5ldyBCb3hlZE51bWJlcihORUdfSU5GX1ZBTCk7XG5leHBvcnQgY29uc3QgTkFOID0gbmV3IEJveGVkTnVtYmVyKE5BTl9WQUwpO1xuIiwiaW1wb3J0IHtcbiAgICBJbmV4YWN0TnVtYmVyLFxuICAgIFNtYWxsRXhhY3ROdW1iZXIsXG59IGZyb20gJy4vVmFsdWUnO1xuaW1wb3J0IHsgQm94ZWROdW1iZXIgfSBmcm9tICcuL0JveGVkTnVtYmVyJztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBWYWx1ZXMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmV4cG9ydCBjb25zdCBaRVJPX1ZBTCA9IG5ldyBTbWFsbEV4YWN0TnVtYmVyKDApO1xuZXhwb3J0IGNvbnN0IE9ORV9WQUwgPSBuZXcgU21hbGxFeGFjdE51bWJlcigxKTtcbmV4cG9ydCBjb25zdCBUV09fVkFMID0gbmV3IFNtYWxsRXhhY3ROdW1iZXIoMik7XG5cbmV4cG9ydCBjb25zdCBORUdfT05FX1ZBTCA9IG5ldyBTbWFsbEV4YWN0TnVtYmVyKC0xKTtcblxuZXhwb3J0IGNvbnN0IFBJX1ZBTCA9IG5ldyBJbmV4YWN0TnVtYmVyKE1hdGguUEkpO1xuXG5leHBvcnQgY29uc3QgSU5GX1ZBTCA9IG5ldyBJbmV4YWN0TnVtYmVyKE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XG5leHBvcnQgY29uc3QgTkVHX0lORl9WQUwgPSBuZXcgSW5leGFjdE51bWJlcihOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpO1xuZXhwb3J0IGNvbnN0IE5BTl9WQUwgPSBuZXcgSW5leGFjdE51bWJlcihOdW1iZXIuTmFOKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIE51bWJlcnMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmV4cG9ydCBjb25zdCBaRVJPID0gbmV3IEJveGVkTnVtYmVyKFpFUk9fVkFMKTtcbmV4cG9ydCBjb25zdCBPTkUgPSBuZXcgQm94ZWROdW1iZXIoT05FX1ZBTCk7XG5leHBvcnQgY29uc3QgVFdPID0gbmV3IEJveGVkTnVtYmVyKFRXT19WQUwpO1xuXG5leHBvcnQgY29uc3QgSEFMRiA9IE9ORS5kaXZpZGUoVFdPKTtcblxuZXhwb3J0IGNvbnN0IE5FR19PTkUgPSBuZXcgQm94ZWROdW1iZXIoTkVHX09ORV9WQUwpO1xuXG5leHBvcnQgY29uc3QgSSA9IG5ldyBCb3hlZE51bWJlcihaRVJPX1ZBTCwgT05FX1ZBTCk7XG5leHBvcnQgY29uc3QgTkVHX0kgPSBuZXcgQm94ZWROdW1iZXIoWkVST19WQUwsIE5FR19PTkVfVkFMKTtcblxuZXhwb3J0IGNvbnN0IFBJID0gbmV3IEJveGVkTnVtYmVyKFBJX1ZBTCk7XG5cbmV4cG9ydCBjb25zdCBJTkYgPSBuZXcgQm94ZWROdW1iZXIoSU5GX1ZBTCk7XG5leHBvcnQgY29uc3QgTkVHX0lORiA9IG5ldyBCb3hlZE51bWJlcihORUdfSU5GX1ZBTCk7XG5leHBvcnQgY29uc3QgTkFOID0gbmV3IEJveGVkTnVtYmVyKE5BTl9WQUwpO1xuIl0sIm5hbWVzIjpbImlzSlNJbnRlZ2VyIiwibiIsIk51bWJlciIsImlzSW50ZWdlciIsIkFic3RyYWN0TnVtYmVyIiwiSW5leGFjdE51bWJlciIsImNvbnN0cnVjdG9yIiwibnVtIiwic3VwZXIiLCJ0aGlzIiwiaXNGaW5pdGUiLCJpc0luZXhhY3QiLCJpc0V4YWN0IiwidG9JbmV4YWN0IiwidG9FeGFjdCIsIm1hdGNoIiwidG9TdHJpbmciLCJwYXJzZUludCIsInRlblRvRGVjaW1hbFBsYWNlcyIsIk1hdGgiLCJwb3ciLCJsZW5ndGgiLCJFeGFjdE51bWJlciIsIm1ha2VJbnN0YW5jZSIsInJvdW5kIiwidG9GaXhudW0iLCJmbG9vciIsInRvU2lnbmVkU3RyaW5nIiwiZ3JlYXRlclRoYW4iLCJvdGhlciIsImdyZWF0ZXJUaGFuT3JFcXVhbCIsImxlc3NUaGFuIiwibGVzc1RoYW5PckVxdWFsIiwiZXF1YWxzIiwiaXNaZXJvIiwiaXNQb3NpdGl2ZSIsImlzTmVnYXRpdmUiLCJhZGQiLCJzdWJ0cmFjdCIsIm11bHRpcGx5IiwiZGl2aWRlIiwibnVtZXJhdG9yIiwiZGVub21pbmF0b3IiLCJpbnRlZ2VyU3FydCIsInNxcnQiLCJhYnMiLCJjZWlsaW5nIiwiY2VpbCIsImxvZyIsImV4cHQiLCJwb3dlciIsImV4cCIsImFuZ2xlIiwiRVhBQ1RfWkVSTyIsIlBJIiwiYXRhbiIsImNvcyIsInNpbiIsImFjb3MiLCJhc2luIiwic3RhdGljIiwiZGVuIiwiQmlnRXhhY3ROdW1iZXIiLCJTbWFsbEV4YWN0TnVtYmVyIiwiVHlwZUVycm9yIiwiaXNVbnNhZmVJbnRlZ2VyIiwiTUFYX1NBRkVfSU5URUdFUiIsIk1JTl9TQUZFX0lOVEVHRVIiLCJpc1NhZmVJbnRlZ2VyIiwibWF4IiwiQmlnSW50IiwibWluIiwiZ2NkIiwiYSIsImIiLCJ0IiwicmVzdWx0IiwidG9CaWdFeGFjdCIsIkVycm9yIiwiYmlnaW50QWJzIiwidG9TbWFsbEV4YWN0Iiwic2xpY2UiLCJmbG9vcmRpZmYiLCJpIiwiWkVST19WQUwiLCJPTkVfVkFMIiwiVFdPX1ZBTCIsIk5FR19PTkVfVkFMIiwiUElfVkFMIiwiSU5GX1ZBTCIsIlBPU0lUSVZFX0lORklOSVRZIiwiTkVHX0lORl9WQUwiLCJORUdBVElWRV9JTkZJTklUWSIsIk5BTl9WQUwiLCJOYU4iLCJMZXZlbCIsInJlYWwiLCJpbWFnIiwibGV2ZWwiLCJ1bmRlZmluZWQiLCJJTlRFR0VSIiwiaXNSYXRpb25hbCIsIlJBVElPTkFMIiwiaXNSZWFsIiwiUkVBTCIsIkNPTVBMRVgiLCJyZWFsRGVuIiwiaW1hZ0RlbiIsImNvbXBvbmVudHNBcmVJbnRlZ2VycyIsInR5cGVzQXJlU2FtZSIsImRlbm9taW5hdG9yc0V4aXN0IiwicmVhbFZhbCIsImltYWdWYWwiLCJpc0JpZyIsImxpZnRUbyIsImlzQ29tcGxleCIsImMiLCJkIiwiciIsIngiLCJ5IiwiY29uIiwiY29uanVnYXRlIiwidXAiLCJkb3duIiwicmVhbFBhcnQiLCJpbWFnaW5hcnlQYXJ0Iiwicl9wbHVzX3giLCJtYWduaXR1ZGUiLCJyZWFsU3FyIiwiaW1hZ1NxciIsInN1bSIsIm1hZyIsInRoZXRhIiwiSSIsIlpFUk8iLCJyZXN1bHRWYWx1ZSIsImsiLCJ6ZXJvIiwib25lIiwidHdvIiwiYWNjIiwiZmFzdEV4cHQiLCJjb3NfYSIsInNpbl9hIiwiaGFsZlBJIiwiVFdPIiwiTkVHX09ORSIsInRtcCIsIk5FR19JIiwiTkVHX0lORiIsIkhBTEYiLCJpeiIsIml6X25lZ2F0ZSIsInoyIiwicGlfaGFsZiIsInJvb3QiLCJsIiwic3FydE9uZU5lZ2F0ZVRoaXNTcSJdLCJzb3VyY2VSb290IjoiIn0=